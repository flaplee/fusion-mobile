"use strict";define(["common/touchslider/touchslider","common/touchguesture/touchguesture","common/pointerevents/pointerevents","common/svgicos/svgicos","site/pages/pages","site/popups/popups","./lang"],function(e,t,n,o,i,s,a){var r,l,c,d,u,h=document.body.querySelector("#activities"),p={appendCss:function(e){var t=document.createElement("link");return/\.less$/.test(e)?self.less?(t.rel="stylesheet/less",t.href=e,less.sheets.push(t),less.refresh()):(t.rel="stylesheet",t.href=e.replace(/less$/,"css")):(t.rel="stylesheet",t.href=e),document.head.appendChild(t)},removeCss:function(e){return e.remove(),"stylesheet/less"===e.rel&&(less.sheets.splice(less.sheets.indexOf(e),1),less.refresh()),e.getAttribute("href")},makeSvg:function(e,t){var n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg");return o.appendChild(document.createElementNS(n,"path")),e&&p.setSvgPath(o,e,t),o},setSvgPath:function(e,t,n){var i=p.makeSvg();o.hasOwnProperty(t)&&(t=o[t]),e.firstChild.setAttribute("d",t),i.style.position="absolute",i.style.bottom=i.style.right="100%",i.firstChild.setAttribute("d",t),document.body.appendChild(i);var s=i.firstChild.getBBox();i.remove(),2==n?(s.width+=2*s.x,s.x=0,s.height+=2*s.y,s.y=0):n&&(s.width>s.height?(s.y-=(s.width-s.height)/2,s.height=s.width):(s.x-=(s.height-s.width)/2,s.width=s.height)),e.setAttribute("viewBox",s.x+" "+s.y+" "+s.width+" "+s.height)},parseHash:function(e){var t={id:r,args:{}},n=(e=e.substr(1).replace(/[#?].*$/,"")).match(/[^=&]+(=[^&]*)?/g);if(n&&"!"===n[0].charAt(0)){var o=decodeURIComponent(n[0].substr(1));i.hasOwnProperty(o)&&(t.id=o);for(var s=1;s<n.length;s++)(o=n[s].match(/^([^=]+)(=)?(.+)?$/))&&(t.args[decodeURIComponent(o[1])]=o[2]?decodeURIComponent(o[3]||""):void 0)}return t},getDefaultBack:function(e){e||(e=p.location);var t,n=i[e.id].backLoc;if(i[e.id].back&&i[i[e.id].back]){t={id:i[e.id].back,args:{}};var o=i[i[e.id].back].alias?i[i[i[e.id].back].alias]:i[i[e.id].back];if(o.args)for(var s=0;s<o.args.length;s++)e.args.hasOwnProperty(o.args[s])&&(t.args[o.args[s]]=e.args[o.args[s]])}if(n&&t){for(var a in t.args)if(t.args[a]!==n.args[a])return t;return n}return n||t},isGoingback:function(e,t){var n=e;if(n!==t){if(t===r||n.length>t.length+1&&n.substr(0,t.length+1)===t+"-")return!0;for(;i[n].back;)if((n=i[n].back)===t)return!0;n=e.split("-");for(var o,s=t.split("-"),a=Math.min(n.length,s.length);o<a&&n[o]===s[o];)o++;if(o<Math.max(n.length,s.length)-1)return o<n.length-1&&n.splice(o+1),o<s.length-1&&s.splice(o+1),p.isGoingback(n.join("-"),s.join("-"))}},replaceLocation:function(e){p.location&&p.isSameLocation(e,p.location)?p.reloadPage():location.replace(p.buildHash(e))}};return self.frameElement&&frameElement.kernel?self.Reflect?Reflect.setPrototypeOf(p,frameElement.kernel):p.__proto__=frameElement.kernel:(p.buildHash=function(e){var t="#!"+encodeURIComponent(e.id);for(var n in e.args)t+=void 0===e.args[n]?"&"+encodeURIComponent(n):"&"+encodeURIComponent(n)+"="+encodeURIComponent(e.args[n]);return t},p.isSameLocation=function(e,t){if(e.id===t.id&&Object.keys(e.args).length===Object.keys(t.args).length){for(var n in e.args){if(!t.args.hasOwnProperty(n))return!1;if(void 0===e.args[n]){if(e.args[n]!==t.args[n])return!1}else if(""+e.args[n]!=""+t.args[n])return!1}return!0}return!1},p.dataType=function(e){var t=typeof e;return["boolean","string","symbol","number","bigint","function","undefined"].indexOf(t)<0?(t=Object.prototype.toString.call(e).replace(/^\[object |\]$/g,"").toLowerCase(),["date","array","regexp","error","null"].indexOf(t)<0?"object":t):t},p.getLang=function(e){for(var t=0;t<navigator.languages.length;t++)if(e.hasOwnProperty(navigator.languages[t]))return e[navigator.languages[t]];return e.en},function(){var e,t,n=document.head.querySelector("meta[name=viewport]"),o=n.content;function i(t,n){var o=Math.min(t,n)/e;return o>1&&(o=Math.sqrt(o)),Math.round(t/o)}p.setAutoScale=function(t){(e=t)>0?self.dispatchEvent(new Event("resize")):n.content=o},self.addEventListener("resize",self.visualViewport?function(){e>0&&(n.content="user-scalable=no, width="+i(Math.round(visualViewport.width*visualViewport.scale),Math.round(visualViewport.height*visualViewport.scale)))}:function(){if(e>0)if("IOS"===browser.name)if(n.content===o)n.content="user-scalable=no, width="+i(innerWidth,innerHeight);else{var s=innerWidth,a=innerHeight;n.content=o,function e(){innerWidth===s&&innerHeight===a?requestAnimationFrame(e):n.content="user-scalable=no, width="+i(innerWidth,innerHeight)}()}else if(t)t=!1;else{n.content!==o&&(t=!0,n.content=o);var r=i(innerWidth,innerHeight);r!==innerWidth&&(t=!0,n.content="user-scalable=no, width="+r)}})}(),function(){function e(e){this.xEvents[e.type].locked=!0;for(var n=0;n<this.xEvents[e.type].heap.length;n++)this.xEvents[e.type].heap[n].call(this,e);for(this.xEvents[e.type].locked=!1;this.xEvents[e.type].stack.length;){if(this.xEvents[e.type].stack[0])if("function"==typeof this.xEvents[e.type].stack[0]){var o=this.xEvents[e.type].heap.indexOf(this.xEvents[e.type].stack[0]);o>=0&&this.xEvents[e.type].heap.splice(o,1)}else this.xEvents[e.type].heap.indexOf(this.xEvents[e.type].stack[0][0])<0&&this.xEvents[e.type].heap.push(this.xEvents[e.type].stack[0][0]);else this.xEvents[e.type].heap.splice(0);this.xEvents[e.type].stack.shift()}t(this,e.type)}function t(e,t,n){!n&&e.xEvents[t].heap.length||(delete e.xEvents[t],e["on"+t]=null)}p.listeners={add:function(t,n,o){var i=0;return t.hasOwnProperty("xEvents")||(t.xEvents={}),t.xEvents.hasOwnProperty(n)||(t.xEvents[n]={stack:[],heap:[],locked:!1},t["on"+n]=e),t.xEvents[n].locked?(t.xEvents[n].stack.push([o]),i=2):t.xEvents[n].heap.indexOf(o)<0&&(t.xEvents[n].heap.push(o),i=1),i},list:function(e,t){var n;if(t)n=e.hasOwnProperty("xEvents")&&e.xEvents.hasOwnProperty(t)?e.xEvents[t].heap.slice(0):[];else if(n={},e.hasOwnProperty("xEvents"))for(var o in e.xEvents)n[o]=e.xEvents[o].heap.slice(0);return n},remove:function(e,n,o){var i=0;if(e.hasOwnProperty("xEvents"))if(n){if(e.xEvents.hasOwnProperty(n))if(e.xEvents[n].locked)e.xEvents[n].stack.push(o),i=2;else if(o){var s=e.xEvents[n].heap.indexOf(o);s>=0&&(e.xEvents[n].heap.splice(s,1),t(e,n),i=1)}else t(e,n,!0),i=1}else{for(var a in e.xEvents)e.xEvents[a].locked?(e.xEvents[a].stack.push(void 0),i=2):t(e,a,!0);i||(i=1)}return i}}}(),function(){function e(e){0===this.scrollTop?this.scrollTop=1:this.scrollTop+this.clientHeight===this.scrollHeight&&(this.scrollTop-=1)}p.scrollReload=function(e,t){var o,i,s,a,r=this,l=n(e,function(n){var d;if("start"===n.type){if(0===l.pointers.length&&0===r.getScrollTop(e))return o=n.y,n.domEvent.view.addEventListener("scroll",c,!0),!0}else{if(a)return a=!1,!0;if(n.y>o+5)i||(i=!0,n.domEvent.view.removeEventListener("scroll",c,!0)),n.domEvent.preventDefault(),s||((s=n.domEvent.view.document.createElement("div")).className="reloadHint",s.appendChild(r.makeSvg("sync-alt-solid",1)),e.appendChild(s)),d=s.offsetHeight||s.clientHeight,n.y-o<2*d?(s.style.top=n.y-o-d+"px",s.classList.remove("pin"),s.style.opacity=(n.y-o)/d/2,s.style.transform="rotate("+360*s.style.opacity+"deg)"):(s.style.top=d+"px",s.style.opacity=1,s.classList.add("pin"),s.style.transform="");else{if(n.y<o&&!i)return!0;s&&(s.remove(),s=void 0)}"end"!==n.type&&"cancel"!==n.type||(s&&(s.remove(),s.classList.contains("pin")&&("function"==typeof t?t():r.reloadPage()),s=void 0),i=!1)}});function c(t){t.target!==e&&(a=!0,this.removeEventListener("scroll",c,!0))}r.fixIosScrolling(e)},p.fixIosScrolling=function(t,n){"IOS"===browser.name&&(t.style.webkitOverflowScrolling="touch",t.addEventListener("touchmove",E,{passive:!1}),n||(t.classList.add("iosScrollFix"),t.scrollTop=1,t.addEventListener("scroll",e)))},p.getScrollTop=function(e){return e.classList.contains("iosScrollFix")?e.scrollTop-1:e.scrollTop},p.getScrollHeight=function(e){return e.classList.contains("iosScrollFix")?e.scrollHeight-2:e.scrollHeight},p.setScrollTop=function(e,t){e.scrollTop=e.classList.contains("iosScrollFix")?t+1:t}}(),function(){var e,t=document.body.querySelector("#helper"),n=t.firstChild,o=t.lastChild;function i(e){o.src=e.img,"right"in e&&(o.style.right=e.right),"left"in e&&(o.style.left=e.left),"top"in e&&(o.style.top=e.top),"bottom"in e&&(o.style.bottom=e.bottom),"width"in e&&(o.style.width=e.width),"height"in e&&(o.style.height=e.height);for(var t=0;t<n.childNodes.length;t++){var i=n.childNodes[t];e.rows[t]?(i.style.height=e.rows[t],i.className="unflexable"):(i.style.height="auto",i.className="flexable")}for(var s=0;s<n.childNodes[1].childNodes.length;s++){var a=n.childNodes[1].childNodes[s];e.cells[s]?(a.style.width=e.cells[s],a.className="unflexable"):(a.style.width="auto",a.className="flexable")}}t.addEventListener("click",function n(){e.length>1?(e.shift(),"function"==typeof e[0]?(e[0](),n()):i(e[0])):t.style.display=""}),p.showHelper=function(n){i((e="array"===p.dataType(n)?n:[n])[0]),t.style.display="block"}}(),function(){var e,t,n,o,i,r=document.body.querySelector("#popup"),l=r.querySelector(":scope>.header>.close"),c=r.querySelector(":scope>.header>.title").firstChild,d=r.querySelector(":scope>.header>.back");function u(o){e&&r.classList.remove(e),t=n=void 0,e=o,r.classList.add(e),c.data=s[o].title,h.classList.contains("hidePopupHeader")&&(document.title=c.data),d.style.display="none"}p.openPopup=function(t,n,o){if(s.hasOwnProperty(t))return y(!1,t,function(){"function"==typeof s[t].open?s[t].open(n,e&&o):p.showPopup(t,o)}),!0},p.showPopup=function(t,n){var a=0;if(s[t].status>1)if(o)i=p.showPopup.bind(this,t,n),a=2;else if(e){if(e===t)"function"!=typeof s[t].onload&&s[t].onload(),"function"==typeof s[t].onloadend&&s[t].onloadend(),a=1;else if("function"!=typeof s[e].onunload||!s[e].onunload()){var l=r.querySelector(":scope>.content>."+e);s[e].status--,s[t].status++,"function"==typeof s[t].onload&&s[t].onload(n),v(r.querySelector(":scope>.content>."+t),l,n,function(){var a=e;if(o=!1,u(t),"function"==typeof s[a].onunloadend&&s[a].onunloadend(),s[a].status--,s[a].autoDestroy?f(s[a],"popup",a):document.activeElement&&l.contains(document.activeElement)&&document.activeElement.blur(),"function"==typeof s[e].onloadend&&s[e].onloadend(n),s[t].status++,"function"==typeof i){var r=i;i=void 0,r()}}),o=t,a=1}}else{s[t].status++,"fucntion"==typeof s[t].onload&&s[t].onload();var c=r.querySelector(":scope>.content>."+t);c.style.left=0,c.style.visibility="inherit",r.classList.add("in"),o=t,"function"==typeof p.popupEvents.onshow&&p.popupEvents.onshow({type:"show",id:t}),u(t),p.hideReadable(),a=1}return a},p.closePopup=function(t){var n=0;return o?(i=p.closePopup.bind(this,t),n=2):!e||t&&e!==t&&!("array"===p.dataType(t)&&t.indexOf(e)>=0)||"function"==typeof s[e].onunload&&s[e].onunload()||(s[e].status--,r.classList.remove("in"),r.classList.add("out"),o=!0,"function"==typeof p.popupEvents.onhide&&p.popupEvents.onhide({type:"hide",id:e}),n=1),n},p.getCurrentPopup=function(){return e},p.setPopupBack=function(e,o){r.classList.contains("in")&&(e?(d.lastChild.data="function"!=typeof e&&s[e].title?s[e].title:a.back,t=e,d.style.display="",n=o):d.style.display="none")},p.setPopupTitle=function(t,n){n?s.hasOwnProperty(n)&&(s[n].title=t,e===n&&(c.data=t,h.classList.contains("hidePopupHeader")&&(document.title=c.data))):r.classList.contains("in")&&(c.data=t,h.classList.contains("hidePopupHeader")&&(document.title=c.data))},p.destroyPopup=function(e){if(2===s[e].status)return f(s[e],"popup",e),!0},p.popupEvents={},l.appendChild(p.makeSvg("times-light",1)),l.addEventListener("click",function(){p.closePopup()}),d.insertBefore(p.makeSvg("angle-left-light",1),d.firstChild),d.addEventListener("click",function(e){"function"==typeof t?t(n):p.openPopup(t,n,!0)}),r.addEventListener("animationend",function(t){if(t.target===this){if(o=!1,this.classList.contains("out")){this.classList.remove("out"),"function"==typeof p.popupEvents.onhideend&&p.popupEvents.onhideend({type:"hideend",id:e});var n=r.querySelector(":scope>.content>."+e);n.style.left=n.style.visibility="","function"==typeof s[e].onunloadend&&s[e].onunloadend(),s[e].status--,s[e].autoDestroy?f(s[e],"popup",e):document.activeElement&&n.contains(document.activeElement)&&document.activeElement.blur(),r.classList.remove(e),e=void 0}else"function"==typeof s[e].onloadend&&s[e].onloadend(),s[e].status++,"function"==typeof p.popupEvents.onshowend&&p.popupEvents.onshowend({type:"showend",id:e});if("function"==typeof i){var a=i;i=void 0,a()}}})}(),c=document.body.querySelector("#readable"),d=c.querySelector(":scope>.close"),u=c.querySelector(":scope>.content"),p.fixIosScrolling(u),p.showReadable=function(e,t,n){"string"==typeof e?u.innerHTML=e:u.appendChild(e),c.className=n?"in "+n:"in",l=t},p.hideReadable=function(){c.classList.contains("in")&&(c.classList.remove("in"),c.classList.add("out"),"function"==typeof l&&l())},p.showForeign=function(e,t){p.showReadable('<iframe frameborder="no" scrolling="auto" sandbox="allow-same-origin allow-forms allow-scripts" src="'+e+'"></iframe>',t,"foreign")},d.appendChild(p.makeSvg("times-solid",1)),d.addEventListener("click",p.hideReadable),c.addEventListener("animationend",function(e){if(e.target===this&&this.classList.contains("out")){for(;u.childNodes.length>0;)u.firstChild.remove();this.className=""}}),function(){var n,o,i=0,s=[],r={},l=document.body.querySelector("#loading"),c=document.body.querySelector("#hint"),d=document.body.querySelector("#dialog"),u=d.querySelector(":scope>div"),f=u.querySelector(":scope>.content"),y=u.querySelector(":scope>.close"),v=u.querySelector(":scope>.btns>.yes"),g=u.querySelector(":scope>.btns>.no"),m=document.body.querySelector("#sliderView"),w=m.querySelector(":scope>.close"),E=e(m.querySelector(":scope>.content")),b=document.body.querySelector("#photoView"),L=b.querySelector(":scope>.close"),x=b.querySelector(":scope>img"),S=b.querySelector(":scope>.actions"),k=t(b);function C(){p.closeDialog()}function q(e,t,n){"inherit"===d.style.visibility?s.push([e,t,n]):(u.className=e,"alert"===e?f.textContent=t:"confirm"===e?"array"===p.dataType(t)?(f.textContent=t[0],v.firstChild.data=t[1],g.firstChild.data=t[2]):(f.textContent=t,v.firstChild.data=a.yes,g.firstChild.data=a.no):"string"==typeof t?f.innerHTML=t:f.appendChild(t),self.addEventListener("resize",P),P(),d.style.visibility="inherit",o=n)}function P(){u.style.width=u.style.height="",u.style.left=u.style.top="20px",u.style.bottom=u.style.right="auto",u.style.width=u.offsetWidth+"px",u.style.height=u.offsetHeight+"px",u.style.left=u.style.top=u.style.bottom=u.style.right=""}function O(){x.style.width=r.w+"px",x.style.height=r.h+"px",x.style.left=r.l+"px",x.style.top=r.t+"px"}function N(){r.ww=innerWidth,r.wh=innerHeight,r.wr=r.ww/r.wh,r.ow=x.naturalWidth,r.oh=x.naturalHeight,r.r=r.ow/r.oh,r.ow>r.ww||r.oh>r.wh?r.r>r.wr?(r.z=r.mz=r.ww/r.ow,r.l=0,r.w=r.ww,r.h=r.w/r.r,r.t=(r.wh-r.h)/2):(r.z=r.mz=r.wh/r.oh,r.t=0,r.h=r.wh,r.w=r.h*r.r,r.l=(r.ww-r.w)/2):(r.z=r.mz=1,r.w=r.ow,r.h=r.oh,r.l=(r.ww-r.w)/2,r.t=(r.wh-r.h)/2),O()}k.onzoomstart=function e(t){var n=t.x,o=t.y,i=r.z;this.onzoomstart=null;this.onzoomchange=s;this.onzoomend=function(t){s.call(this,t),this.onzoomchange=this.zoomend=null,this.onzoomstart=e};function s(e){var t=Math.max(Math.min(e.zoom*i,1),r.mz);t!==r.z&&(r.w=r.ow*t,r.h=r.oh*t,r.l=r.w>r.ww?Math.min(Math.max(n+(r.l-n)*t/r.z,r.ww-r.w),0):(r.ww-r.w)/2,r.t=r.h>r.wh?Math.min(Math.max(o+(r.t-o)*t/r.z,r.wh-r.h),0):(r.wh-r.h)/2,r.z=t,O())}},k.ondragstart=function e(t){var n=t.x,o=t.y,i=r.l,s=r.t;k.ondragmove=a;k.ondragend=function(t){a.call(this,t),this.ondragmove=this.ondragend=null,this.ondragstart=e};function a(e){r.w>r.ww&&(r.l=Math.min(Math.max(i+e.x-n,r.ww-r.w),0)),r.h>r.wh&&(r.t=Math.min(Math.max(s+e.y-o,r.wh-r.h),0)),O()}},p.showPhotoView=function(e,t,n){for(x.src=e;S.childNodes.length;)S.firstChild.remove();if("function"==typeof n&&t&&t.length){for(var o=0;o<t.length;o++){var i=document.createElement("a");i.href="javascript:;",i.appendChild(document.createTextNode(t[o])),i.addEventListener("click",n.bind(p,o)),S.appendChild(i)}S.style.display=""}else S.style.display="none"},p.hidePhotoView=function(){x.src="about:blank"},x.addEventListener("load",function(){b.style.visibility="inherit",self.addEventListener("resize",N),N()}),x.addEventListener("error",function(){b.style.visibility="",self.removeEventListener("resize",N)}),p.showSliderView=function(e,t,n){m.className=n||"";for(var o=0;o<e.length;o++)E.add(e[o]);t&&E.slideTo(t,!0)},p.hideSliderView=function(){E.clear()},p.alert=function(e,t){q("alert",e,t)},p.confirm=function(e,t){q("confirm",e,t)},p.htmlDialog=function(e,t,n){q(t||"",e,n)},p.closeDialog=function(e){for(self.removeEventListener("resize",P,!1),d.style.visibility="","function"==typeof o&&o(e);f.childNodes.length;)f.lastChild.remove();if(o=void 0,s.length){var t=s.shift();p[t.shift()].apply(p,t)}},p.showLoading=function(e){l.querySelector(":scope>div").lastChild.data=e||a.loading,0===i&&(l.style.visibility="inherit",h.classList.add("mask")),i++},p.hideLoading=function(){i>0&&0===--i&&(l.style.visibility="",h.classList.remove("mask"),"function"==typeof p.dialogEvents.onloaded&&p.dialogEvents.onloaded({type:"loaded"}))},p.isLoading=function(){return i>0},p.hint=function(e,t){c.querySelector(":scope>.text").firstChild.data=e,n?clearTimeout(n):c.style.opacity=1,n=setTimeout(function(){c.style.opacity="",n=void 0},t||5e3)},p.dialogEvents={},E.onchange=function(){var e="";if(this.children.length){if(this.children.length>1)for(var t=0;t<this.children.length;t++)e+=t===this.current?"●":"○";m.style.visibility="inherit"}else m.style.visibility="";m.querySelector(":scope>.nav").firstChild.data=e},y.appendChild(p.makeSvg("times-circle-solid",1)),y.addEventListener("click",C),g.addEventListener("click",C),v.addEventListener("click",p.closeDialog),w.appendChild(p.makeSvg("times-solid",1)),L.appendChild(w.firstChild.cloneNode(!0)),w.addEventListener("click",p.hideSliderView),L.addEventListener("click",p.hidePhotoView)}()),function(){var e,t,n,o,s,l,c=location.pathname,d=document.body.querySelector("#page"),u=d.querySelector(":scope>.navMenu"),g=d.querySelector(":scope>.header>.title").firstChild,m=d.querySelector(":scope>.header>.back"),w=d.querySelector(":scope>.header>.leftMenuBtn"),E=d.querySelector(":scope>.header>.rightMenuBtn");try{sessionStorage.setItem(0,0),sessionStorage.removeItem(0)}catch(e){Storage.prototype.setItem=function(){}}function b(e){for(;u.childNodes.length;)u.firstChild.remove();for(var t in l={},s=e)i.hasOwnProperty(t)&&(l[t]=u.appendChild(document.createElement("a")),l[t].href="#!"+t,RegExp("^"+t+"(?:-|$)").test(p.location.id)?(l[t].className="selected",l[t].appendChild(p.makeSvg("string"==typeof s[t]?s[t]:s[t].selected,1))):l[t].appendChild(p.makeSvg("string"==typeof s[t]?s[t]:s[t].normal,1)),l[t].appendChild(document.createTextNode(i[t].alias?i[t].title||i[i[t].alias].title:i[t].title)))}function L(){var t=p.parseHash(location.hash);p.isSameLocation(t,p.location)||(p.lastLocation=p.location,p.location=t,!i[p.location.id].back||p.lastLocation.id!==i[p.location.id].back&&i[p.lastLocation.id].alias!==i[p.location.id].back?i[p.lastLocation.id].backLoc&&(p.location.id===i[p.lastLocation.id].back||i[p.location.id].alias&&i[p.location.id].alias===i[p.lastLocation.id].back)&&(delete i[p.lastLocation.id].backLoc,delete e[p.lastLocation.id],sessionStorage.setItem(c,JSON.stringify(e))):(e[p.location.id]=i[p.location.id].backLoc=p.lastLocation,sessionStorage.setItem(c,JSON.stringify(e))),x())}function x(){var e=p.location.id;if(p.hasOwnProperty("lastLocation")){var r=e.replace(/-.*$/,""),c=p.lastLocation.id.replace(/-.*$/,"");r!==c&&(l.hasOwnProperty(r)&&(l[r].className="selected","string"!=typeof s[r]&&p.setSvgPath(l[r].firstChild,s[r].selected,1)),l.hasOwnProperty(c)&&(l[c].className="","string"!=typeof s[c]&&p.setSvgPath(l[c].firstChild,s[c].normal,1))),k()}"function"==typeof p.pageEvents.onroute&&p.pageEvents.onroute({type:"route"}),y(!0,e,function(s){if(n)o=!0;else{var r;if(e===t)C();else{var l=i[e].alias?i[e].alias:e,c=i[e].title||i[l].title;for(d.classList.add(e),g.data=c,(h.classList.contains("clean")||h.classList.contains("hidePageHeader"))&&(document.title=c),self.frameElement&&frameElement.kernel&&"page"===p.getCurrentPopup()&&p.setPopupTitle(c);E.childNodes.length;)E.firstChild.remove();for(E.removeAttribute("href");w.childNodes.length;)w.firstChild.remove();w.removeAttribute("href"),i[l].rightMenuContent||i[l].onrightmenuclick?("string"==typeof i[l].rightMenuContent?E.innerHTML=i[l].rightMenuContent:i[l].rightMenuContent&&E.appendChild(i[l].rightMenuContent),"function"==typeof i[l].onrightmenuclick?E.href="javascript:;":i[l].onrightmenuclick&&(E.href=i[l].onrightmenuclick),E.style.display=""):E.style.display="none",i[l].leftMenuContent||i[l].onleftmenuclick?("string"==typeof i[l].leftMenuContent?w.innerHTML=i[l].leftMenuContent:i[l].leftMenuContent&&w.appendChild(i[l].leftMenuContent),"function"==typeof i[l].onleftmenuclick?w.href="javascript:;":i[l].onleftmenuclick&&(w.href=i[l].onleftmenuclick),w.style.display=""):w.style.display="none";var u=p.getDefaultBack();if(u){var y=i[u.id].title;!y&&i[u.id].alias&&(y=i[i[u.id].alias].title),m.lastChild.data=y||a.back,m.href=p.buildHash(u),m.style.display=""}else m.style.display="none";var b=d.querySelector(":scope>.content>."+l);if(t){d.classList.remove(t);var L=i[t].alias?i[t].alias:t,S=t;if(t=e,l===L)C(r=!0);else{n=!0;var k=d.querySelector(":scope>.content>."+L),q=p.isGoingback(S,e);r=!q||s,v(b,k,q,function(){n=!1,"function"==typeof i[L].onunloadend&&i[L].onunloadend(),i[L].status--,i[L].autoDestroy?f(i[L],"page",L):document.activeElement&&k.contains(document.activeElement)&&document.activeElement.blur(),"function"==typeof i[l].onloadend&&i[l].onloadend(r),i[l].status++,o&&(o=!1,b.style.visibility="inherit",x())}),"function"==typeof i[L].onunload&&i[L].onunload(),i[L].status--,i[l].status++,"function"==typeof i[l].onload&&i[l].onload(r)}}else r=!0,t=e,b.style.left=0,b.style.visibility="inherit",C(r)}"function"==typeof p.pageEvents.onrouteend&&p.pageEvents.onrouteend({type:"routeend",force:r})}})}function S(e,n){var o=i[t].alias?i[i[t].alias]:i[t];(!e||e===t||"array"===p.dataType(e)&&e.indexOf(t)>=0)&&(n||k(),"function"==typeof o.onload&&o.onload(!0),"function"==typeof o.onloadend&&o.onloadend(!0))}function k(){self.frameElement&&frameElement.kernel||(p.hideReadable(),p.closePopup())}function C(e){var n=i[t].alias?i[i[t].alias]:i[t];n.status<3&&n.status++,"function"==typeof n.onload&&n.onload(e),"function"==typeof n.onloadend&&n.onloadend(e),n.status<4&&n.status++}p.init=function(t,n){if(i.hasOwnProperty(t))if(r){if(n&&b(n),r!==t){var o=r;if(r=t,p.location.id===o)return L(),!0}}else{var s=function e(t){t&&(p.listeners.remove(this,t.type,e),setTimeout(function(){document.body.querySelector("#popup").style.animationDuration=""},400)),document.body.addEventListener("transitionend",function(e){e.target===this&&(document.body.style.transition="")}),document.documentElement.classList.remove("loading")};for(var a in r=t,p.location=p.parseHash(location.hash),p.location.args.ui&&p.location.args.ui.split(",").forEach(function(e){h.classList.add(e)}),e=(e=sessionStorage.getItem(c))?JSON.parse(e):{})i.hasOwnProperty(a)&&(i[a].backLoc=e[a]);if(self.addEventListener("hashchange",L),b(n),x(),p.location.args.hasOwnProperty("autopopup")){var l;if(p.location.args.hasOwnProperty("autopopuparg"))try{l=JSON.parse(p.location.args.autopopuparg)}catch(e){}p.openPopup(p.location.args.autopopup,l)?(document.body.querySelector("#popup").style.animationDuration="1ms",p.listeners.add(p.popupEvents,"showend",s)):s()}else s()}},p.reloadPage=function(e,t){var n;p.isLoading()?(n=p.location,p.listeners.add(p.dialogEvents,"loaded",function o(i){p.listeners.remove(this,i.type,o);n===p.location&&S(e,t)})):S(e,t)},p.destroyPage=function(e){if(2===i[e].status)return f(i[e],"page",e),!0},p.pageEvents={},m.insertBefore(p.makeSvg("angle-left-light",1),m.firstChild),E.addEventListener("click",function(e){var n=i[i[t].alias?i[t].alias:t];"function"==typeof n.onrightmenuclick&&n.onrightmenuclick()}),w.addEventListener("click",function(e){var n=i[i[t].alias?i[t].alias:t];"function"==typeof n.onleftmenuclick&&n.onleftmenuclick()})}(),a=p.getLang(a),self.addEventListener("contextmenu","Firefox"===browser.name?E:w),self.addEventListener("dragstart",w),"IOS"===browser.name&&(self.addEventListener("gesturestart",w),self.addEventListener("touchmove",w,{passive:!1})),p;function f(e,t,n){var o=t+"/"+n+"/",i=document.body.querySelector("#"+t+">.content>."+n);"function"==typeof e.ondestroy&&e.ondestroy(),i.remove(),e.css&&"string"!=typeof e.css&&(e.css=p.removeCss(e.css).substr(require.toUrl(o).length)),e.js&&(o+=e.js,require.defined(o)&&(i=require(o),require.undef(o),i&&(self.Reflect?Reflect.setPrototypeOf(e,Object.prototype):e.__proto__=Object.prototype))),delete e.status}function y(e,t,n){var o,r,l,c;if(e?(l="page",(o=i[t]).alias&&(t=o.alias,o=i[o.alias])):(l="popup",o=s[t]),o.status>1)n();else if(!o.status){var d=function(e){if(r.querySelector(":scope>.content").insertAdjacentHTML("beforeEnd",'<div class="'+t+'">'+e+"</div>"),g(r.querySelector(":scope>.content>."+t)),"js"in o){p.showLoading();var i=c+o.js;require([i],function(e){e&&(self.Reflect?Reflect.setPrototypeOf(o,e):o.__proto__=e),o.status++,n(!0),p.hideLoading()},"dev"===VERSION?void 0:function(e){f(o,l,t),e.requireType&&"scripterror"!==e.requireType&&"nodefine"!==e.requireType||e.xhr&&404!==e.xhr.status?u(i,e.message):h(),p.hideLoading()})}else o.status++,n(!0)},u=function(t,n){p.alert(a.error.replace("${res}",t)+n,e?function(){history.back()}:void 0)},h=function(){e?location.reload():p.confirm(a.update,function(e){e&&location.reload()})};o.status=1,r=document.body.querySelector("#"+l),c=l+"/"+t+"/";var y=require.toUrl(c);if("string"==typeof o.css&&(o.css=p.appendCss(y+o.css)),"html"in o){p.showLoading();var v=y+o.html,m=new XMLHttpRequest;m.open("get",v,!0),m.onreadystatechange=function(){4===this.readyState&&(200===this.status?d(this.responseText):(f(o,l,t),"dev"===VERSION||404!==this.status?u(v,this.status):h()),p.hideLoading())},m.send("")}else d("")}}function v(e,t,n,o){e.style.visibility="inherit",n?(t.style.animationName="panelTransR1",e.style.animationName="panelTransR2"):(t.style.animationName="panelTransL1",e.style.animationName="panelTransL2"),"function"==typeof o&&g(e,function e(t){this.removeEventListener(t.type,e,!1);o()})}function g(e,t){"function"!=typeof t&&(t=m),e.addEventListener("animationend",t)}function m(e){e.target===this&&("1"===this.style.animationName.substr(this.style.animationName.length-1)?this.style.left=this.style.visibility="":this.style.left=0,this.style.animationName="")}function w(e){e.preventDefault()}function E(e){e.stopPropagation()}});