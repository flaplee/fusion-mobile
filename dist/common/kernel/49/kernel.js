'use strict';define(['common/touchslider/touchslider','common/touchguesture/touchguesture','common/pointerevents/pointerevents','common/svgicos/svgicos','site/pages/pages','site/popups/popups'],function(a,b,c,d,e,f){function g(a,b,c){var d=b+'/'+c+'/',e=document.body.querySelector('#'+b+'>.content>.'+c);2===a.loaded&&'function'==typeof a.ondestory&&a.ondestory(),e.remove(),a.css&&'string'!=typeof a.css&&(a.css=w.removeCss(a.css).substr(require.toUrl(d).length)),a.js&&(d+=a.js,require.defined(d)&&(e=require(d),require.undef(d),e&&(self.Reflect?Reflect.setPrototypeOf(a,Object.prototype):a.__proto__=Object.prototype))),a.loaded=0}function h(a,b,c,d){function f(e){if(h.querySelector(':scope>.content').insertAdjacentHTML('beforeEnd','<div class="'+b+'">'+e+'</div>'),m(h.querySelector(':scope>.content>.'+b)),'js'in a){w.showLoading();var f=o+a.js;require([f],function(b){b&&(self.Reflect?Reflect.setPrototypeOf(a,b):a.__proto__=b),a.loaded=2,d(!0),w.hideLoading()},'dev'===VERSION?void 0:function(d){g(a,l,b),d.requireType&&'scripterror'!==d.requireType&&'nodefine'!==d.requireType||d.xhr&&404!==d.xhr.status?j(f,d.message,c):k(c),w.hideLoading()})}else a.loaded=2,d(!0)}var h,l,o;if(c&&a.alias&&(b=a.alias,a=e[a.alias]),2===a.loaded)d();else if(1!==a.loaded){a.loaded=1,c?(h=document.body.querySelector('#page'),l='page'):(h=document.body.querySelector('#popup'),l='popup'),o=l+'/'+b+'/';var p=require.toUrl(o);if('string'==typeof a.css&&(a.css=w.appendCss(p+a.css)),'html'in a){w.showLoading();var m=p+a.html,q=new XMLHttpRequest;q.open('get',m,!0),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):(g(a,l,b),'dev'===VERSION||404!==this.status?j(m,this.status,c):k(c)),w.hideLoading())},q.send('')}else f('')}}function j(a,b,c){w.alert('加载'+a+'时发生了一个错误: '+b,c?function(){history.back()}:void 0)}function k(a){a?location.reload():w.confirm('网站已经更新, 使用该功能需要先重新加载. 是否立即刷新本页?',function(a){a&&location.reload()})}function l(a,b,c,d){function e(a){this.removeEventListener(a.type,e,!1),d()}a.style.visibility='inherit',c?(b.style.animationName='panelTransR1',a.style.animationName='panelTransR2'):(b.style.animationName='panelTransL1',a.style.animationName='panelTransL2'),'function'==typeof d&&m(a,e)}function m(a,b){'function'!=typeof b&&(b=n),a.addEventListener('animationend',b)}function n(a){a.target===this&&(this.style.left='1'===this.style.animationName.substr(this.style.animationName.length-1)?this.style.visibility='':0,this.style.animationName='')}function o(a){a.preventDefault()}function p(a){a.stopPropagation()}function q(a){a&&(w.listeners.remove(this,a.type,q),setTimeout(function(){document.body.querySelector('#popup').style.animationDuration=''},400)),document.body.addEventListener('transitionend',function(a){a.target===this&&(document.body.style.transition='')}),document.documentElement.classList.remove('loading')}var r,s=Math.max,u=Math.min,v=document.body.querySelector('#activities'),w={appendCss:function c(a){var b=document.createElement('link');return /\.less$/.test(a)?self.less?(b.rel='stylesheet/less',b.href=a,less.sheets.push(b),less.refresh()):(b.rel='stylesheet',b.href=a.replace(/less$/,'css')):(b.rel='stylesheet',b.href=a),document.head.appendChild(b)},removeCss:function b(a){return a.remove(),'stylesheet/less'===a.rel&&(less.sheets.splice(less.sheets.indexOf(a),1),less.refresh()),a.getAttribute('href')},makeSvg:function d(a,b){var c=document.createElementNS('http://www.w3.org/2000/svg','svg');return c.appendChild(document.createElementNS('http://www.w3.org/2000/svg','path')),a&&w.setSvgPath(c,a,b),c},setSvgPath:function g(a,b,c){var e=w.makeSvg();d.hasOwnProperty(b)&&(b=d[b]),a.firstChild.setAttribute('d',b),e.style.position='absolute',e.style.bottom=e.style.right='100%',e.firstChild.setAttribute('d',b),document.body.appendChild(e);var f=e.firstChild.getBBox();e.remove(),2==c?(f.width+=2*f.x,f.x=0,f.height+=2*f.y,f.y=0):c&&(f.width>f.height?(f.y-=(f.width-f.height)/2,f.height=f.width):(f.x-=(f.height-f.width)/2,f.width=f.height)),a.setAttribute('viewBox',f.x+' '+f.y+' '+f.width+' '+f.height)},parseHash:function f(b){var c={id:r,args:{}};b=b.substr(1).replace(/[#?].*$/,'');var d=b.match(/[^=&]+(=[^&]*)?/g);if(d&&'!'===d[0].charAt(0)){var g=decodeURIComponent(d[0].substr(1));e.hasOwnProperty(g)&&(c.id=g);for(var a=1;a<d.length;a++)g=d[a].match(/^([^=]+)(=)?(.+)?$/),g&&(c.args[decodeURIComponent(g[1])]=g[2]?decodeURIComponent(g[3]||''):void 0)}return c},getDefaultBack:function d(a){a||(a=w.location);var b,c=e[a.id].backLoc;if(e[a.id].back&&e[e[a.id].back]){b={id:e[a.id].back,args:{}};var f=e[e[a.id].back].alias?e[e[e[a.id].back].alias]:e[e[a.id].back];if(f.args)for(var g=0;g<f.args.length;g++)a.args.hasOwnProperty(f.args[g])&&(b.args[f.args[g]]=a.args[f.args[g]])}if(c&&b){for(var h in b.args)if(b.args[h]!==c.args[h])return b;return c}return c||b},isGoingback:function d(a,b){var c=a;if(c!==b){if(b===r||c.length>b.length+1&&c.substr(0,b.length+1)===b+'-')return!0;for(;e[c].back;)if(c=e[c].back,c===b)return!0;c=a.split('-');for(var g,h=b.split('-'),k=u(c.length,h.length);g<k&&c[g]===h[g];)g++;if(i<s(c.length,t.length)-1)return i<c.length-1&&c.splice(i+1),i<t.length-1&&t.splice(i+1),w.isGoingback(c.join('-'),t.join('-'))}},replaceLocation:function b(a){w.location&&w.isSameLocation(a,w.location)?w.reloadPage():location.replace(w.buildHash(a))}};return!function(){function a(a){for(;B.childNodes.length;)B.firstChild.remove();for(var b in x=a,y={},x)e.hasOwnProperty(b)&&(y[b]=B.appendChild(document.createElement('a')),y[b].href='#!'+b,RegExp('^'+b+'(?:-|$)').test(w.location.id)?(y[b].className='selected',y[b].appendChild(w.makeSvg('string'==typeof x[b]?x[b]:x[b].selected,1))):y[b].appendChild(w.makeSvg('string'==typeof x[b]?x[b]:x[b].normal,1)),y[b].appendChild(document.createTextNode(e[b].alias?e[b].title||e[e[b].alias].title:e[b].title)))}function b(){var a=w.parseHash(location.hash);w.isSameLocation(a,w.location)||(w.lastLocation=w.location,w.location=a,e[w.location.id].back&&(w.lastLocation.id===e[w.location.id].back||e[w.lastLocation.id].alias===e[w.location.id].back)?(m[w.location.id]=e[w.location.id].backLoc=w.lastLocation,sessionStorage.setItem(z,JSON.stringify(m))):e[w.lastLocation.id].backLoc&&(w.location.id===e[w.lastLocation.id].back||e[w.location.id].alias&&e[w.location.id].alias===e[w.lastLocation.id].back)&&(delete e[w.lastLocation.id].backLoc,delete m[w.lastLocation.id],sessionStorage.setItem(z,JSON.stringify(m))),c())}function c(){var a=w.location.id,b=e[a];if(w.hasOwnProperty('lastLocation')){var d=a.replace(/-.*$/,''),g=w.lastLocation.id.replace(/-.*$/,'');d!==g&&(y.hasOwnProperty(d)&&(y[d].className='selected','string'!=typeof x[d]&&w.setSvgPath(y[d].firstChild,x[d].selected,1)),y.hasOwnProperty(g)&&(y[g].className='','string'!=typeof x[g]&&w.setSvgPath(y[g].firstChild,x[g].normal,1))),f()}'function'==typeof w.pageEvents.onroute&&w.pageEvents.onroute({type:'route'}),h(b,a,!0,function(b){if(s)u=!0;else{var d;if(a===n)j();else{var f=e[a].alias?e[a].alias:a,g=e[a].title||e[f].title;for(A.classList.add(a),C.data=g,(v.classList.contains('clean')||v.classList.contains('hidePageHeader'))&&(document.title=g),self.frameElement&&frameElement.kernel&&'page'===w.getCurrentPopup()&&w.setPopupTitle(g);F.childNodes.length;)F.firstChild.remove();for(F.removeAttribute('href');E.childNodes.length;)E.firstChild.remove();E.removeAttribute('href'),e[f].rightMenuContent||e[f].onrightmenuclick?('string'==typeof e[f].rightMenuContent?F.innerHTML=e[f].rightMenuContent:e[f].rightMenuContent&&F.appendChild(e[f].rightMenuContent),'function'==typeof e[f].onrightmenuclick?F.href='javascript:;':e[f].onrightmenuclick&&(F.href=e[f].onrightmenuclick),F.style.display=''):F.style.display='none',e[f].leftMenuContent||e[f].onleftmenuclick?('string'==typeof e[f].leftMenuContent?E.innerHTML=e[f].leftMenuContent:e[f].leftMenuContent&&E.appendChild(e[f].leftMenuContent),'function'==typeof e[f].onleftmenuclick?E.href='javascript:;':e[f].onleftmenuclick&&(E.href=e[f].onleftmenuclick),E.style.display=''):E.style.display='none',k(w.getDefaultBack());var h=A.querySelector(':scope>.content>.'+f);if(n){A.classList.remove(n);var m=n,o=e[m].alias?e[m].alias:m;if(n=a,f===o)d=!0,j(d);else{s=!0;var p=A.querySelector(':scope>.content>.'+o),q=w.isGoingback(m,a);d=!q||b,l(h,p,q,function(){s=!1,'function'==typeof e[o].onunloadend&&e[o].onunloadend(),document.activeElement&&p.contains(document.activeElement)&&document.activeElement.blur(),'function'==typeof e[f].onloadend&&e[f].onloadend(d),u&&(u=!1,h.style.visibility='inherit',c())}),'function'==typeof e[o].onunload&&e[o].onunload(),'function'==typeof e[f].onload&&e[f].onload(d)}}else d=!0,n=a,h.style.left=0,h.style.visibility='inherit',j(d)}'function'==typeof w.pageEvents.onroutend&&w.pageEvents.onroutend({type:'routend',force:d})}})}function d(a,b){var c=e[n].alias?e[e[n].alias]:e[n];(!a||a===n||'array'===w.dataType(a)&&0<=a.indexOf(n))&&(!b&&f(),'function'==typeof c.onload&&c.onload(!0),'function'==typeof c.onloadend&&c.onloadend(!0))}function f(){self.frameElement&&frameElement.kernel||(w.hideReadable(),w.closePopup())}function j(a){var b=e[n].alias?e[e[n].alias]:e[n];'function'==typeof b.onload&&b.onload(a),'function'==typeof b.onloadend&&b.onloadend(a)}function k(a){if(a&&a.id){var b=e[a.id].title;!b&&e[a.id].alias&&(b=e[e[a.id].alias].title),D.lastChild.data=b||'返回',D.href=w.buildHash(a),D.style.display=''}else D.style.display='none'}var m,n,s,u,x,y,z=location.pathname,A=document.body.querySelector('#page'),B=A.querySelector(':scope>.navMenu'),C=A.querySelector(':scope>.header>.title').firstChild,D=A.querySelector(':scope>.header>.back'),E=A.querySelector(':scope>.header>.leftMenuBtn'),F=A.querySelector(':scope>.header>.rightMenuBtn');try{sessionStorage.setItem(0,0),sessionStorage.removeItem(0)}catch(a){Storage.prototype.setItem=function(){}}w.init=function(d,f){if(e.hasOwnProperty(d))if(r=d,w.hasOwnProperty('location'))f&&a(f),b();else{for(var g in w.location=w.parseHash(location.hash),w.location.args.ui&&w.location.args.ui.split(',').forEach(function(a){v.classList.add(a)}),m=sessionStorage.getItem(z),m=m?JSON.parse(m):{},m)e.hasOwnProperty(g)&&(e[g].backLoc=m[g]);self.addEventListener('hashchange',b),a(f),self.addEventListener('contextmenu','Firefox'===browser.name?p:o),self.addEventListener('dragstart',o),c(),w.location.args.hasOwnProperty('autopopup')&&w.openPopup(w.location.args.autopopup,w.location.args.autopopuparg?JSON.parse(w.location.args.autopopuparg):void 0)?(document.body.querySelector('#popup').style.animationDuration='1ms',w.listeners.add(w.popupEvents,'showend',q)):q()}},w.reloadPage=function(a,b){function c(f){w.listeners.remove(this,f.type,c),e===w.location&&d(a,b)}var e;w.isLoading()?(e=w.location,w.listeners.add(w.dialogEvents,'loaded',c)):d(a,b)},w.destoryPage=function(a){e.hasOwnProperty(a)&&g(e[a],'page',a)},w.pageEvents={},D.insertBefore(w.makeSvg('angle-left-light',1),D.firstChild),F.addEventListener('click',function(){var a=e[e[n].alias?e[n].alias:n];'function'==typeof a.onrightmenuclick&&a.onrightmenuclick()}),E.addEventListener('click',function(){var a=e[e[n].alias?e[n].alias:n];'function'==typeof a.onleftmenuclick&&a.onleftmenuclick()})}(),'IOS'===browser.name&&(self.addEventListener('gesturestart',o),self.addEventListener('touchmove',o,{passive:!1})),self.frameElement&&frameElement.kernel?self.Reflect?Reflect.setPrototypeOf(w,frameElement.kernel):w.__proto__=frameElement.kernel:(!function(){w.buildHash=function(a){var b='#!'+encodeURIComponent(a.id);for(var c in a.args)b+=void 0===a.args[c]?'&'+encodeURIComponent(c):'&'+encodeURIComponent(c)+'='+encodeURIComponent(a.args[c]);return b},w.isSameLocation=function(a,b){if(a.id===b.id&&Object.keys(a.args).length===Object.keys(b.args).length){for(var c in a.args){if(!b.args.hasOwnProperty(c))return!1;if(void 0===a.args[c]){if(a.args[c]!==b.args[c])return!1;}else if(''+a.args[c]!=''+b.args[c])return!1}return!0}return!1},w.dataType=function(b){var a=typeof b;return 0>['boolean','string','symbol','number','bigint','function','undefined'].indexOf(a)?(a=Object.prototype.toString.call(b).replace(/^\[object |\]$/g,'').toLowerCase(),0>['date','array','regexp','error','null'].indexOf(a)?'object':a):a}}(),!function(){function a(a,c){var e=u(a,c),f=e/b;return 1<f&&(f=Math.sqrt(f)),d(a/f)}var b,c,d=Math.round,e=document.head.querySelector('meta[name=viewport]'),f=e.content;w.setAutoScale=function(a){b=a,0<b?self.visualViewport?visualViewport.dispatchEvent(new Event('resize')):self.dispatchEvent(new Event('resize')):e.content=f},self.visualViewport?visualViewport.addEventListener('resize',function(){0<b&&(e.content='user-scalable=no, width='+a(d(visualViewport.width*visualViewport.scale),d(visualViewport.height*visualViewport.scale)))}):self.addEventListener('resize',function(){if(0<b)if('IOS'===browser.name){if(e.content===f)e.content='user-scalable=no, width='+a(innerWidth,innerHeight);else{var d=innerWidth,g=innerHeight,h=function(){innerWidth===d&&innerHeight===g?requestAnimationFrame(h):e.content='user-scalable=no, width='+a(innerWidth,innerHeight)};e.content=f,h()}}else if(c)c=!1;else{e.content!==f&&(c=!0,e.content=f);var j=a(innerWidth,innerHeight);j!==innerWidth&&(c=!0,e.content='user-scalable=no, width='+j)}})}(),!function(){function a(a,b){a.xEvents[b.type].locked=!0;for(var c=0;c<a.xEvents[b.type].length;c++)a.xEvents[b.type][c].call(a,b);for(a.xEvents[b.type].locked=!1;a.xEvents[b.type].stack.length;){if(a.xEvents[b.type].stack[0]){var d=a.xEvents[b.type].indexOf(a.xEvents[b.type].stack[0][1]);a.xEvents[b.type].stack[0][0]?0<=d&&a.xEvents[b.type].splice(d,1):0>d&&a.xEvents[b.type].push(a.xEvents[b.type].stack[0][1])}else a.xEvents[b.type].splice(0,a.xEvents[b.type].length);a.xEvents[b.type].stack.shift()}if(a.xEvents[b.type].length||(delete a.xEvents[b.type],a['on'+b.type]=null),a.xEvents.removeMark){for(var e in delete a.xEvents.removeMark,a.xEvents)delete a.xEvents[e],a['on'+e]=null;delete a.xEvents}}w.listeners={add:function e(b,c,d){b.xEvents||(b.xEvents=function(c){a(b,c)}),b.xEvents[c]||(b.xEvents[c]=[],b.xEvents[c].stack=[],b.xEvents[c].locked=!1,b['on'+c]=b.xEvents),b.xEvents[c].locked?b.xEvents[c].stack.push([!1,d]):0>b.xEvents[c].indexOf(d)&&b.xEvents[c].push(d)},list:function d(a,b){var c;if(b)c=a.xEvents&&a.xEvents[b]?a.xEvents[b].slice(0):[];else if(c={},a.xEvents)for(var e in a.xEvents)'array'===w.dataType(a.xEvents[e])&&a.xEvents[e].length&&(c[e]=a.xEvents[e].slice(0));return c},remove:function d(a,b,c){if(a.xEvents)if(b){if(a.xEvents[b]){if(a.xEvents[b].locked)c?a.xEvents[b].stack.push([!0,c]):a.xEvents[b].stack.push(null);else if(c){var e=a.xEvents[b].indexOf(c);0<=e&&a.xEvents[b].splice(e,1)}else a.xEvents[b].splice(0,a.xEvents[b].length);0===a.xEvents[b].length&&(delete a.xEvents[b],a['on'+b]=null)}}else if(!a.xEvents.removeMark){var f;for(var g in a.xEvents)a.xEvents[g].locked?f=!0:(delete a.xEvents[g],a['on'+g]=null);f?a.xEvents.removeMark=!0:delete a.xEvents}}}}(),!function(){function a(){0===this.scrollTop?this.scrollTop=1:this.scrollTop+this.clientHeight===this.scrollHeight&&(this.scrollTop-=1)}w.scrollReload=function(a,b){function d(b){b.target!==a&&(j=!0,this.removeEventListener('scroll',d,!0))}var e,f,g,j,k=this,l=c(a,function(c){var m;if('start'!==c.type){if(j)return j=!1,!0;if(c.y>e+5)f||(f=!0,c.domEvent.view.removeEventListener('scroll',d,!0)),c.domEvent.preventDefault(),g||(g=c.domEvent.view.document.createElement('div'),g.className='reloadHint',g.appendChild(k.makeSvg('sync-alt-solid',1)),a.appendChild(g)),m=g.offsetHeight||g.clientHeight,c.y-e<2*m?(g.style.top=c.y-e-m+'px',g.classList.remove('pin'),g.style.opacity=(c.y-e)/m/2,g.style.transform='rotate('+360*g.style.opacity+'deg)'):(g.style.top=m+'px',g.style.opacity=1,g.classList.add('pin'),g.style.transform='');else{if(c.y<e&&!f)return!0;g&&(g.remove(),g=void 0)}('end'===c.type||'cancel'===c.type)&&(g&&(g.remove(),g.classList.contains('pin')&&('function'==typeof b?b():k.reloadPage()),g=void 0),f=!1)}else if(0===l.pointers.length&&0===k.getScrollTop(a))return e=c.y,c.domEvent.view.addEventListener('scroll',d,!0),!0});k.fixIosScrolling(a)},w.fixIosScrolling=function(b,c){'IOS'===browser.name&&(b.style.webkitOverflowScrolling='touch',b.addEventListener('touchmove',p,{passive:!1}),!c&&(b.classList.add('iosScrollFix'),b.scrollTop=1,b.addEventListener('scroll',a)))},w.getScrollTop=function(a){return a.classList.contains('iosScrollFix')?a.scrollTop-1:a.scrollTop},w.getScrollHeight=function(a){return a.classList.contains('iosScrollFix')?a.scrollHeight-2:a.scrollHeight},w.setScrollTop=function(a,b){a.scrollTop=a.classList.contains('iosScrollFix')?b+1:b}}(),!function(){function a(){1<c.length?(c.shift(),'function'==typeof c[0]?(c[0](),a()):b(c[0])):d.style.display=''}function b(a){f.src=a.img,'right'in a&&(f.style.right=a.right),'left'in a&&(f.style.left=a.left),'top'in a&&(f.style.top=a.top),'bottom'in a&&(f.style.bottom=a.bottom),'width'in a&&(f.style.width=a.width),'height'in a&&(f.style.height=a.height);for(var b,c=0;c<e.childNodes.length;c++)b=e.childNodes[c],a.rows[c]?(b.style.height=a.rows[c],b.className='unflexable'):(b.style.height='auto',b.className='flexable');for(var d,g=0;g<e.childNodes[1].childNodes.length;g++)d=e.childNodes[1].childNodes[g],a.cells[g]?(d.style.width=a.cells[g],d.className='unflexable'):(d.style.width='auto',d.className='flexable')}var c,d=document.body.querySelector('#helper'),e=d.firstChild,f=d.lastChild;d.addEventListener('click',a),w.showHelper=function(a){c='array'===w.dataType(a)?a:[a],b(c[0]),d.style.display='block'}}(),!function(){function a(a,b){return c&&'function'==typeof f[c].onunload&&f[c].onunload()||'function'==typeof f[a].onload&&f[a].onload(b)}function b(a){c&&m.classList.remove(c),d=e=void 0,c=a,m.classList.add(c),o.data=f[a].title,v.classList.contains('hidePopupHeader')&&(document.title=o.data),p.style.display='none'}var c,d,e,j,k,m=document.body.querySelector('#popup'),n=m.querySelector(':scope>.header>.close'),o=m.querySelector(':scope>.header>.title').firstChild,p=m.querySelector(':scope>.header>.back');w.openPopup=function(a,b,d){var e=f[a];return e?(h(e,a,!1,function(){'function'==typeof e.open?e.open(b,c&&d):w.showPopup(a,d)}),!0):void w.hint('popup config not found: '+a)},w.showPopup=function(d,e){if(j)k=function(){w.showPopup(d,e)};else{e=c&&e;var n=m.querySelector(':scope>.content>.'+d);if(!m.classList.contains('in')){if(a(d,e))return!0;n.style.left=0,n.style.visibility='inherit',m.classList.add('in'),j=d,'function'==typeof w.popupEvents.onshow&&w.popupEvents.onshow({type:'show',id:d}),b(d),w.hideReadable()}else{if(c!==d){if(a(d,e))return!0;var g=c,h=m.querySelector(':scope>.content>.'+c);return l(n,h,e,function(){if(j=!1,b(d),'function'==typeof f[g].onunloadend&&f[g].onunloadend(),document.activeElement&&h.contains(document.activeElement)&&document.activeElement.blur(),'function'==typeof f[c].onloadend&&f[c].onloadend(e),'function'==typeof k){var a=k;k=void 0,a()}}),j=d,!1}'function'==typeof f[d].onload&&f[d].onload(e)||'function'!=typeof f[d].onloadend||f[d].onloadend(e)}}},w.closePopup=function(a){if(j)k=function(){w.closePopup(a)};else{var b=w.getCurrentPopup();b&&(!a||b===a||'array'===w.dataType(a)&&0<=a.indexOf(b))&&('function'!=typeof f[b].onunload||!f[b].onunload())&&(m.classList.remove('in'),m.classList.add('out'),j=!0,'function'==typeof w.popupEvents.onhide&&w.popupEvents.onhide({type:'hide',id:b}))}},w.getCurrentPopup=function(){if(m.classList.contains('in'))return c},w.setPopupBack=function(a,b){m.classList.contains('in')&&(a?(p.lastChild.data='function'!=typeof a&&f[a].title?f[a].title:'返回',d=a,p.style.display='',e=b):p.style.display='none')},w.setPopupTitle=function(a,b){b?f.hasOwnProperty(b)&&(f[b].title=a,c===b&&(o.data=a,v.classList.contains('hidePopupHeader')&&(document.title=o.data))):m.classList.contains('in')&&(o.data=a,v.classList.contains('hidePopupHeader')&&(document.title=o.data))},w.destoryPopup=function(a){f.hasOwnProperty(a)&&g(f[a],'popup',a)},w.popupEvents={},n.appendChild(w.makeSvg('times-light',1)),n.addEventListener('click',function(){w.closePopup()}),p.insertBefore(w.makeSvg('angle-left-light',1),p.firstChild),p.addEventListener('click',function(){'function'==typeof d?d(e):w.openPopup(d,e,!0)}),m.addEventListener('animationend',function(a){if(a.target===this){if(j=!1,this.classList.contains('out')){this.classList.remove('out'),'function'==typeof w.popupEvents.onhideend&&w.popupEvents.onhideend({type:'hideend',id:c});var b=m.querySelector(':scope>.content>.'+c);b.style.left=b.style.visibility='','function'==typeof f[c].onunloadend&&f[c].onunloadend(),document.activeElement&&b.contains(document.activeElement)&&document.activeElement.blur(),m.classList.remove(c),c=void 0}else'function'==typeof f[c].onloadend&&f[c].onloadend(!0),'function'==typeof w.popupEvents.onshowend&&w.popupEvents.onshowend({type:'showend',id:c});if('function'==typeof k){var d=k;k=void 0,d()}}})}(),!function(){var a,b=document.body.querySelector('#readable'),c=b.querySelector(':scope>.close'),d=b.querySelector(':scope>.content');w.fixIosScrolling(d),w.showReadable=function(c,e,f){'string'==typeof c?d.innerHTML=c:d.appendChild(c),b.className=f?'in '+f:'in',a=e},w.hideReadable=function(){b.classList.contains('in')&&(b.classList.remove('in'),b.classList.add('out'),'function'==typeof a&&a())},w.showForeign=function(a,b){w.showReadable('<iframe frameborder="no" scrolling="auto" sandbox="allow-same-origin allow-forms allow-scripts" src="'+a+'"></iframe>',b,'foreign')},c.appendChild(w.makeSvg('times-solid',1)),c.addEventListener('click',w.hideReadable),b.addEventListener('animationend',function(a){if(a.target===this&&this.classList.contains('out')){for(;0<d.childNodes.length;)d.firstChild.remove();this.className=''}})}(),!function(){function c(){w.closeDialog()}function d(a,b,c){'inherit'===r.style.visibility?n.push([a,b,c]):(x.className=a,'alert'===a?y.textContent=b:'confirm'===a?'string'==typeof b?(y.textContent=b,A.textContent='是',B.textContent='否'):(y.textContent=b[0],A.textContent=b[1],B.textContent=b[2]):'string'==typeof b?y.innerHTML=b:y.appendChild(b),self.addEventListener('resize',e),e(),r.style.visibility='inherit',l=c)}function e(){x.style.width=x.style.height='',x.style.left=x.style.top='20px',x.style.bottom=x.style.right='auto',x.style.width=x.offsetWidth+'px',x.style.height=x.offsetHeight+'px',x.style.left=x.style.top=x.style.bottom=x.style.right=''}function f(){H.style.width=o.w+'px',H.style.height=o.h+'px',H.style.left=o.l+'px',H.style.top=o.t+'px'}function g(){o.ww=innerWidth,o.wh=innerHeight,o.wr=o.ww/o.wh,o.ow=H.naturalWidth,o.oh=H.naturalHeight,o.r=o.ow/o.oh,o.ow>o.ww||o.oh>o.wh?o.r>o.wr?(o.z=o.mz=o.ww/o.ow,o.l=0,o.w=o.ww,o.h=o.w/o.r,o.t=(o.wh-o.h)/2):(o.z=o.mz=o.wh/o.oh,o.t=0,o.h=o.wh,o.w=o.h*o.r,o.l=(o.ww-o.w)/2):(o.z=o.mz=1,o.w=o.ow,o.h=o.oh,o.l=(o.ww-o.w)/2,o.t=(o.wh-o.h)/2),f()}function h(a){function b(a){var b=s(u(a.zoom*e,1),o.mz);b!==o.z&&(o.w=o.ow*b,o.h=o.oh*b,o.l=o.w>o.ww?u(s(c+(o.l-c)*b/o.z,o.ww-o.w),0):(o.ww-o.w)/2,o.t=o.h>o.wh?u(s(d+(o.t-d)*b/o.z,o.wh-o.h),0):(o.wh-o.h)/2,o.z=b,f())}var c=a.x,d=a.y,e=o.z;this.onzoomstart=null,this.onzoomchange=b,this.onzoomend=function(a){b.call(this,a),this.onzoomchange=this.zoomend=null,this.onzoomstart=h}}function j(a){function b(a){o.w>o.ww&&(o.l=u(s(e+a.x-c,o.ww-o.w),0)),o.h>o.wh&&(o.t=u(s(g+a.y-d,o.wh-o.h),0)),f()}var c=a.x,d=a.y,e=o.l,g=o.t;J.ondragmove=b,J.ondragend=function(a){b.call(this,a),this.ondragmove=this.ondragend=null,this.ondragstart=j}}var k,l,m=0,n=[],o={},p=document.body.querySelector('#loading'),q=document.body.querySelector('#hint'),r=document.body.querySelector('#dialog'),x=r.querySelector(':scope>div'),y=x.querySelector(':scope>.content'),z=x.querySelector(':scope>.close'),A=x.querySelector(':scope>.btns>.yes'),B=x.querySelector(':scope>.btns>.no'),C=document.body.querySelector('#sliderView'),D=C.querySelector(':scope>.close'),E=a(C.querySelector(':scope>.content')),F=document.body.querySelector('#photoView'),G=F.querySelector(':scope>.close'),H=F.querySelector(':scope>img'),I=F.querySelector(':scope>.actions'),J=b(F);J.onzoomstart=h,J.ondragstart=j,w.showPhotoView=function(a,b,c){for(H.src=a;I.childNodes.length;)I.firstChild.remove();if('function'==typeof c&&b&&b.length){for(var d,e=0;e<b.length;e++)d=document.createElement('a'),d.href='javascript:;',d.appendChild(document.createTextNode(b[e])),d.addEventListener('click',c.bind(w,e)),I.appendChild(d);I.style.display=''}else I.style.display='none'},w.hidePhotoView=function(){H.src='about:blank'},H.addEventListener('load',function(){F.style.visibility='inherit',self.addEventListener('resize',g),g()}),H.addEventListener('error',function(){F.style.visibility='',self.removeEventListener('resize',g)}),w.showSliderView=function(a,b,c){C.className=c||'';for(var d=0;d<a.length;d++)E.add(a[d]);b&&E.slideTo(b,!0)},w.hideSliderView=function(){E.clear()},w.alert=function(a,b){d('alert',a,b)},w.confirm=function(a,b){d('confirm',a,b)},w.htmlDialog=function(a,b,c){d(b||'',a,c)},w.closeDialog=function(b){for(self.removeEventListener('resize',e,!1),r.style.visibility='','function'==typeof l&&l(b);y.childNodes.length;)y.lastChild.remove();if(l=void 0,n.length){var c=n.shift();w[c.shift()].apply(w,c)}},w.showLoading=function(a){p.querySelector(':scope>div').lastChild.data=a?a:'加载中...',0==m&&(p.style.visibility='inherit',v.classList.add('mask')),m++},w.hideLoading=function(){0<m&&(m--,0==m&&(p.style.visibility='',v.classList.remove('mask'),'function'==typeof w.dialogEvents.onloaded&&w.dialogEvents.onloaded({type:'loaded'})))},w.isLoading=function(){return 0<m},w.hint=function(a,b){q.querySelector(':scope>.text').firstChild.data=a,k?clearTimeout(k):q.style.opacity=1,k=setTimeout(function(){q.style.opacity='',k=void 0},b?b:5e3)},w.dialogEvents={},E.onchange=function(){var a='';if(this.children.length){if(1<this.children.length)for(var b=0;b<this.children.length;b++)a+=b===this.current?'●':'○';C.style.visibility='inherit'}else C.style.visibility='';C.querySelector(':scope>.nav').firstChild.data=a},z.appendChild(w.makeSvg('times-circle-solid',1)),z.addEventListener('click',c),B.addEventListener('click',c),A.addEventListener('click',w.closeDialog),D.appendChild(w.makeSvg('times-solid',1)),G.appendChild(D.firstChild.cloneNode(!0)),D.addEventListener('click',w.hideSliderView),G.addEventListener('click',w.hidePhotoView)}()),w});