"use strict";define(["common/touchslider/touchslider","common/touchguesture/touchguesture","common/pointerevents/pointerevents","common/svgicos/svgicos","site/pages/pages","site/panels/panels","site/popups/popups","./lang"],function(e,t,n,o,i,s,a,l){var r,c,d,u,h,p,f,y,v,m=document.body.querySelector("#activities"),g={appendCss:function(e){var t=document.createElement("link");return self.less?(t.rel="stylesheet/less",t.href=e+".less",less.sheets.push(t),less.refresh()):(t.rel="stylesheet",t.href=e+".css"),document.head.appendChild(t)},removeCss:function(e){return e.remove(),"stylesheet/less"===e.rel&&(less.sheets.splice(less.sheets.indexOf(e),1),less.refresh()),e.getAttribute("href").replace(/\.(le|c)ss$/,"")},makeSvg:function(e,t){var n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg");return o.appendChild(document.createElementNS(n,"path")),e&&g.setSvgPath(o,e,t),o},setSvgPath:function(e,t,n){var i=g.makeSvg();o.hasOwnProperty(t)&&(t=o[t]),e.firstChild.setAttribute("d",t),i.style.position="absolute",i.style.bottom=i.style.right="100%",i.firstChild.setAttribute("d",t),document.body.appendChild(i);var s=i.firstChild.getBBox();i.remove(),2==n?(s.width+=2*s.x,s.x=0,s.height+=2*s.y,s.y=0):n&&(s.width>s.height?(s.y-=(s.width-s.height)/2,s.height=s.width):(s.x-=(s.height-s.width)/2,s.width=s.height)),e.setAttribute("viewBox",s.x+" "+s.y+" "+s.width+" "+s.height)},parseHash:function(e){var t={id:r,args:{}},n=(e=e.substr(1).replace(/[#?].*$/,"")).match(/[^=&]+(=[^&]*)?/g);if(n&&"!"===n[0].charAt(0)){var o=decodeURIComponent(n[0].substr(1));i.hasOwnProperty(o)&&(t.id=o);for(var s=1;s<n.length;s++)(o=n[s].match(/^([^=]+)(=)?(.+)?$/))&&(t.args[decodeURIComponent(o[1])]=o[2]?decodeURIComponent(o[3]||""):void 0)}return t},getDefaultBack:function(e){var t;if(e||(e=g.location),e.args.backHash)try{t=g.parseHash(e.args.backHash)}catch(e){}if(t)return t;var n=i[e.id].backLoc;if(i[e.id].back&&i[i[e.id].back]){t={id:i[e.id].back,args:{}};var o=i[i[e.id].back].alias?i[i[i[e.id].back].alias]:i[i[e.id].back];if(o.args)for(var s=0;s<o.args.length;s++)e.args.hasOwnProperty(o.args[s])&&(t.args[o.args[s]]=e.args[o.args[s]])}if(n&&t){for(var a in t.args)if(t.args[a]!==n.args[a])return t;return n}return n||t},isGoingback:function(e,t){var n=e;if(n!==t){if(t===r||n.length>t.length+1&&n.substr(0,t.length+1)===t+"-")return!0;for(;i[n].back;)if((n=i[n].back)===t)return!0;n=e.split("-");for(var o,s=t.split("-"),a=Math.min(n.length,s.length);o<a&&n[o]===s[o];)o++;if(o<Math.max(n.length,s.length)-1)return o<n.length-1&&n.splice(o+1),o<s.length-1&&s.splice(o+1),g.isGoingback(n.join("-"),s.join("-"))}},replaceLocation:function(e){g.location&&g.isSameLocation(e,g.location)?g.reloadPage():location.replace(g.buildHash(e))}};return document.documentElement.style.hasOwnProperty("animation")?(c="animationend",d="animationName",u="animationDuration"):(c="webkitAnimationEnd",d="webkitAnimationName",u="webkitAnimationDuration"),self.frameElement&&frameElement.kernel?self.Reflect?Reflect.setPrototypeOf(g,frameElement.kernel):g.__proto__=frameElement.kernel:(g.buildHash=function(e){var t="#!"+encodeURIComponent(e.id);for(var n in e.args)t+=void 0===e.args[n]?"&"+encodeURIComponent(n):"&"+encodeURIComponent(n)+"="+encodeURIComponent(e.args[n]);return t},g.isSameLocation=function(e,t){if(e.id===t.id&&Object.keys(e.args).length===Object.keys(t.args).length){for(var n in e.args){if(!t.args.hasOwnProperty(n))return!1;if(void 0===e.args[n]){if(e.args[n]!==t.args[n])return!1}else if(""+e.args[n]!=""+t.args[n])return!1}return!0}return!1},g.getLang=function(e){if(navigator.languages){for(var t=0;t<navigator.languages.length;t++)if(e.hasOwnProperty(navigator.languages[t]))return e[navigator.languages[t]]}else if(e.hasOwnProperty(navigator.language))return e[navigator.language];return e.en},function(){var e,t,n,o,i=document.head.querySelector("meta[name=viewport]"),s=i.content;function a(){var o=i.content.match(/initial-scale=([\d\.]+)/);o=o?+o[1]:1;var s=Math.round(innerWidth*o),r=Math.round(innerHeight*o);e===s&&t===r?n=requestAnimationFrame(a):(l(s,r),e=s,t=r,n=void 0)}function l(e,t,n){if(e&&t){var s=Math.min(e,t),a=s/o;a>1&&(a=Math.sqrt(a)),a=Math.round(s/a),a=n?"width="+a:"user-scalable=no, initial-scale="+(a=s/a)+", maximum-scale="+a+", minimum-scale="+a,i.content!==a&&(i.content=a)}}g.setAutoScale=function(n){(o=n)>0?self.visualViewport?self.visualViewport.dispatchEvent(new Event("resize")):self.dispatchEvent(new Event("resize")):(i.content=s,e=t=void 0)},self.visualViewport?self.visualViewport.addEventListener("resize",function(){o>0&&l(Math.round(this.width*this.scale),Math.round(this.height*this.scale),!0)}):self.addEventListener("resize",function(){o>0&&(n&&cancelAnimationFrame(n),a())})}(),function(){var e="function"==typeof Symbol?Symbol("xEvents"):"xEvents";function t(t){this[e][t.type].locked=!0;for(var o=0;o<this[e][t.type].heap.length;o++)this[e][t.type].heap[o].call(this,t);for(this[e][t.type].locked=!1;this[e][t.type].stack.length;){if(this[e][t.type].stack[0])if("function"==typeof this[e][t.type].stack[0]){var i=this[e][t.type].heap.indexOf(this[e][t.type].stack[0]);i>=0&&this[e][t.type].heap.splice(i,1)}else this[e][t.type].heap.indexOf(this[e][t.type].stack[0][0])<0&&this[e][t.type].heap.push(this[e][t.type].stack[0][0]);else this[e][t.type].heap.splice(0);this[e][t.type].stack.shift()}n(this,t.type)}function n(t,n,o){!o&&t[e][n].heap.length||(delete t[e][n],t["on"+n]=null)}g.listeners={add:function(n,o,i){var s=0;return"function"==typeof i&&(n.hasOwnProperty(e)||(n[e]={}),n[e].hasOwnProperty(o)||(n[e][o]={stack:[],heap:[],locked:!1},n["on"+o]=t),n[e][o].locked?(n[e][o].stack.push([i]),s=2):n[e][o].heap.indexOf(i)<0&&(n[e][o].heap.push(i),s=1)),s},list:function(t,n){var o;if(n)o=t.hasOwnProperty(e)&&t[e].hasOwnProperty(n)?t[e][n].heap.slice(0):[];else if(o={},t.hasOwnProperty(e))for(var i in t[e])o[i]=t[e][i].heap.slice(0);return o},remove:function(t,o,i){var s=0;if(t.hasOwnProperty(e))if(o){if(t[e].hasOwnProperty(o))if(t[e][o].locked)t[e][o].stack.push(i),s=2;else if("function"==typeof i){var a=t[e][o].heap.indexOf(i);a>=0&&(t[e][o].heap.splice(a,1),n(t,o),s=1)}else n(t,o,!0),s=1}else{for(var l in t[e])t[e][l].locked?(t[e][l].stack.push(void 0),s=2):n(t,l,!0);s||(s=1)}return s}}}(),function(){function e(e){0===this.scrollTop?this.scrollTop=1:this.scrollTop+this.clientHeight===this.scrollHeight&&(this.scrollTop-=1)}g.scrollReload=function(e,t){var o,i,s,a,l=this,r=n(e,function(n){var d;if("start"===n.type){if(0===r.pointers.length&&0===l.getScrollTop(e))return o=n.y,n.domEvent.view.addEventListener("scroll",c,!0),!0}else{if(a)return a=!1,!0;if(n.y>o)i||(i=!0,n.domEvent.view.removeEventListener("scroll",c,!0)),n.domEvent.preventDefault(),n.domEvent.stopPropagation(),s||((s=n.domEvent.view.document.createElement("div")).className="reloadHint",s.appendChild(l.makeSvg("sync-alt-solid",1)),e.appendChild(s)),d=s.offsetHeight||s.clientHeight,n.y-o<2*d?(s.style.top=n.y-o-d+"px",s.classList.remove("pin"),s.style.opacity=(n.y-o)/d/2,s.style.transform="rotate("+360*s.style.opacity+"deg)"):(s.style.top=d+"px",s.style.opacity=1,s.classList.add("pin"),s.style.transform="");else{if(n.y<o&&!i)return!0;s&&(s.remove(),s=void 0)}"end"!==n.type&&"cancel"!==n.type||(s&&(s.remove(),s.classList.contains("pin")&&("function"==typeof t?t():l.reloadPage()),s=void 0),i=!1)}});function c(t){t.target!==e&&(a=!0,this.removeEventListener("scroll",c,!0))}l.fixIosScrolling(e)},g.fixIosScrolling=function(t,n){"IOS"===browser.name&&(t.addEventListener("touchmove",C,{passive:!1}),n||(t.classList.add("iosScrollFix"),t.scrollTop=1,t.addEventListener("scroll",e)))},g.getScrollTop=function(e){return e.classList.contains("iosScrollFix")?e.scrollTop-1:e.scrollTop},g.getScrollHeight=function(e){return e.classList.contains("iosScrollFix")?e.scrollHeight-2:e.scrollHeight},g.setScrollTop=function(e,t){e.scrollTop=e.classList.contains("iosScrollFix")?t+1:t}}(),function(){var e,t=document.body.querySelector("#helper"),n=t.firstChild,o=t.lastChild;function i(e){o.src=e.img,"right"in e&&(o.style.right=e.right),"left"in e&&(o.style.left=e.left),"top"in e&&(o.style.top=e.top),"bottom"in e&&(o.style.bottom=e.bottom),"width"in e&&(o.style.width=e.width),"height"in e&&(o.style.height=e.height);for(var t=0;t<n.childNodes.length;t++){var i=n.childNodes[t];e.rows[t]?(i.style.height=e.rows[t],i.className="unflexable"):(i.style.height="auto",i.className="flexable")}for(var s=0;s<n.childNodes[1].childNodes.length;s++){var a=n.childNodes[1].childNodes[s];e.cells[s]?(a.style.width=e.cells[s],a.className="unflexable"):(a.style.width="auto",a.className="flexable")}}t.addEventListener("click",function n(){e.length>1?(e.shift(),"function"==typeof e[0]?(e[0](),n()):i(e[0])):t.style.display=""}),g.showHelper=function(n){i((e="Array"===dataType(n)?n:[n])[0]),t.style.display="block"}}(),function(){var e,t,o,i,a,l,r,c,d,u,h=document.querySelector("#panel"),p=h.querySelector(":scope>.backdrop"),f=h.querySelector(":scope>.content"),y=n(h,function(n){if("start"===n.type){if(!y.pointers.length&&!e)return f.querySelector(":scope>."+t),a=l=i=n.x,r=c=n.domEvent.timeStamp,n.domEvent.view.addEventListener("scroll",L,!0),!0}else{if(u)return u=!1,!0;if("move"===n.type)a=l,r=c,l=n.x,c=n.domEvent.timeStamp,!d&&Math.abs(l-i)>5&&(d=!0,n.domEvent.view.removeEventListener("scroll",L,!0)),d&&(n.domEvent.preventDefault(),f.style.transform="translateX("+Math.max(Math.min(l-i,0),-f.offsetWidth)+"px)");else{if(d){var o=(n.x-a)/(n.domEvent.timeStamp-r),s=4e3*Math.pow(o,2);o<0&&(s=-s),(!(s=s+l-i<-f.offsetWidth/2)||g.closePanel())&&s||"translateX(0px)"===f.style.transform||(f.style.transition="",f.style.transform="translateX(0px)",f.addEventListener("transitionend",m))}else n.domEvent.view.addEventListener("scroll",L,!0);u=d=!1}}});function v(n){if("function"!=typeof s[t].onunload||!s[t].onunload())return s[t].status--,e=f.querySelector(":scope>."+t),f.style.transition=f.style.transform="",n&&(p.style.opacity=""),!0}function m(e){e.target===this&&(this.style.transition="none",this.removeEventListener(e.type,m))}function L(){u=!0,this.removeEventListener("scroll",L,!0)}g.openPanel=function(e,t){if(s.hasOwnProperty(e))return b("panel",e,function(n){"function"==typeof s[e].open?s[e].open(t):g.showPanel(e)}),!0},g.showPanel=function(n){var i=0;return s[n].status>1&&(e?(o=g.showPopup.bind(this,n),i=2):t?t===n?("function"!=typeof s[n].onload&&s[n].onload(),"function"==typeof s[n].onloadend&&s[n].onloadend(),i=1):v()&&(o=g.showPanel.bind(this,n),i=1):(s[n].status++,"fucntion"==typeof s[n].onload&&s[n].onload(),h.style.visibility="inherit",p.style.opacity=1,(e=f.querySelector(":scope>."+n)).style.right=e.style.top="auto",e.style.position="relative",f.style.width=e.offsetWidth+"px",f.style.transform="translateX(0px)",h.className=t=n)),i},g.closePanel=function(n){var i=0;return e?(o=g.closePanel.bind(this,n),i=2):t&&(!n||t===n||"Array"===dataType(n)&&n.indexOf(t)>=0)&&v(!0)&&(i=1),i},g.getCurrentPanel=function(){return t},g.destroyPanel=function(e){if(2===s[e].status)return w(s[e],"panel",e),!0},f.addEventListener("transitionend",function(n){if(e&&n.target===this&&(this.style.transform?("function"==typeof s[t].onloadend&&s[t].onloadend(),s[t].status++,this.style.width="",this.style.transition="none"):("function"==typeof s[t].onunloadend&&s[t].onunloadend(),s[t].status--,e.style.position=e.style.right=e.style.top="",s[t].autoDestroy?w(s[t],"panel",t):document.activeElement&&e.contains(document.activeElement)&&document.activeElement.blur(),t=void 0),e=void 0,o)){var i=o;o=void 0,i()}}),p.addEventListener("transitionend",function(e){e.target!==this||p.style.opacity||(h.style.visibility="")}),p.addEventListener("click",g.closePanel.bind(g,void 0))}(),function(){var e,t,n,o,i,s=document.body.querySelector("#popup"),r=s.querySelector(":scope>.header>.close"),d=s.querySelector(":scope>.header>.title").firstChild,u=s.querySelector(":scope>.header>.back");function h(o){e&&s.classList.remove(e),t=n=void 0,e=o,s.classList.add(e),d.data=a[o].title,m.classList.contains("hidePopupHeader")&&(document.title=d.data),u.style.display="none"}g.openPopup=function(t,n,o){if(a.hasOwnProperty(t))return b("popup",t,function(){"function"==typeof a[t].open?a[t].open(n,e&&o):g.showPopup(t,o)}),!0},g.showPopup=function(t,n){var l=0;if(a[t].status>1)if(o)i=g.showPopup.bind(this,t,n),l=2;else if(e){if(e===t)"function"==typeof a[t].onload&&a[t].onload(),"function"==typeof a[t].onloadend&&a[t].onloadend(),l=1;else if("function"!=typeof a[e].onunload||!a[e].onunload()){var r=s.querySelector(":scope>.content>."+e);a[e].status--,a[t].status++,"function"==typeof a[t].onload&&a[t].onload(n),L(s.querySelector(":scope>.content>."+t),r,n,function(){var s=e;if(o=!1,h(t),"function"==typeof a[s].onunloadend&&a[s].onunloadend(),a[s].status--,a[s].autoDestroy?w(a[s],"popup",s):document.activeElement&&r.contains(document.activeElement)&&document.activeElement.blur(),"function"==typeof a[e].onloadend&&a[e].onloadend(n),a[t].status++,"function"==typeof i){var l=i;i=void 0,l()}}),o=t,l=1}}else{a[t].status++,"fucntion"==typeof a[t].onload&&a[t].onload();var c=s.querySelector(":scope>.content>."+t);c.style.left=0,c.style.visibility="inherit",s.classList.add("in"),o=t,"function"==typeof g.popupEvents.onshow&&g.popupEvents.onshow({type:"show",id:t}),h(t),g.hideReadable(),l=1}return l},g.closePopup=function(t){var n=0;return o?(i=g.closePopup.bind(this,t),n=2):!e||t&&e!==t&&!("Array"===dataType(t)&&t.indexOf(e)>=0)||"function"==typeof a[e].onunload&&a[e].onunload()||(a[e].status--,s.classList.remove("in"),s.classList.add("out"),o=!0,"function"==typeof g.popupEvents.onhide&&g.popupEvents.onhide({type:"hide",id:e}),n=1),n},g.getCurrentPopup=function(){return e},g.setPopupBack=function(e,o){s.classList.contains("in")&&(e?(u.lastChild.data="function"!=typeof e&&a[e].title?a[e].title:l.back,t=e,u.style.display="",n=o):u.style.display="none")},g.setPopupTitle=function(t,n){n?a.hasOwnProperty(n)&&(a[n].title=t,e===n&&(d.data=t,m.classList.contains("hidePopupHeader")&&(document.title=d.data))):s.classList.contains("in")&&(d.data=t,m.classList.contains("hidePopupHeader")&&(document.title=d.data))},g.destroyPopup=function(e){if(2===a[e].status)return w(a[e],"popup",e),!0},g.popupEvents={},r.appendChild(g.makeSvg("times-light",1)),r.addEventListener("click",function(){g.closePopup()}),u.insertBefore(g.makeSvg("angle-left-light",1),u.firstChild),u.addEventListener("click",function(e){"function"==typeof t?t(n):g.openPopup(t,n,!0)}),s.addEventListener(c,function(t){if(t.target===this){if(o=!1,this.classList.contains("out")){this.classList.remove("out"),"function"==typeof g.popupEvents.onhideend&&g.popupEvents.onhideend({type:"hideend",id:e});var n=s.querySelector(":scope>.content>."+e);n.style.left=n.style.visibility="","function"==typeof a[e].onunloadend&&a[e].onunloadend(),a[e].status--,a[e].autoDestroy?w(a[e],"popup",e):document.activeElement&&n.contains(document.activeElement)&&document.activeElement.blur(),s.classList.remove(e),e=void 0}else"function"==typeof a[e].onloadend&&a[e].onloadend(),a[e].status++,"function"==typeof g.popupEvents.onshowend&&g.popupEvents.onshowend({type:"showend",id:e});if("function"==typeof i){var l=i;i=void 0,l()}}})}(),f=document.body.querySelector("#readable"),y=f.querySelector(":scope>.close"),v=f.querySelector(":scope>.content"),g.fixIosScrolling(v),p=v.className,g.showReadable=function(e,t,n){"string"==typeof e?v.innerHTML=e:v.appendChild(e),v.className=n?p+" "+n:p,f.className="in",h=t},g.hideReadable=function(){f.classList.contains("in")&&(f.classList.remove("in"),f.classList.add("out"),"function"==typeof h&&h())},g.showForeign=function(e,t){g.showReadable(`<iframe frameborder="no" scrolling="${"IOS"===browser.name?"no":"auto"}" sandbox="allow-same-origin allow-forms allow-scripts allow-modals" src="${e}"></iframe>`,t,"foreign")},y.appendChild(g.makeSvg("times-solid",1)),y.addEventListener("click",g.hideReadable),f.addEventListener(c,function(e){if(e.target===this&&this.classList.contains("out")){for(;v.childNodes.length>0;)v.firstChild.remove();this.className=""}}),function(){var n,o,i=0,s=[],a={},r=document.body.querySelector("#loading"),c=document.body.querySelector("#hint"),d=document.body.querySelector("#dialog"),u=d.querySelector(":scope>div"),h=u.querySelector(":scope>.content"),p=u.querySelector(":scope>.close"),f=u.querySelector(":scope>.btns>.yes"),y=u.querySelector(":scope>.btns>.no"),v=document.body.querySelector("#sliderView"),w=v.querySelector(":scope>.close"),b=e(v.querySelector(":scope>.content")),L=document.body.querySelector("#photoView"),E=L.querySelector(":scope>.close"),k=L.querySelector(":scope>img"),S=L.querySelector(":scope>.actions"),C=t(L);function P(){g.closeDialog()}function x(e,t,n){"inherit"===d.style.visibility?s.push([e,t,n]):(u.className=e,"alert"===e?"Array"===dataType(t)?(h.textContent=t[0],f.firstChild.data=t[1]):(h.textContent=t,f.firstChild.data=l.ok):"confirm"===e?"Array"===dataType(t)?(h.textContent=t[0],f.firstChild.data=t[1],y.firstChild.data=t[2]):(h.textContent=t,f.firstChild.data=l.yes,y.firstChild.data=l.no):"string"==typeof t?h.innerHTML=t:h.appendChild(t),self.addEventListener("resize",q),q(),d.style.visibility="inherit",o=n)}function q(){u.style.width=u.style.height="",u.style.left=u.style.top="20px",u.style.bottom=u.style.right="auto",u.style.width=u.offsetWidth+"px",u.style.height=u.offsetHeight+"px",u.style.left=u.style.top=u.style.bottom=u.style.right=""}function O(){k.style.width=a.w+"px",k.style.height=a.h+"px",k.style.left=a.l+"px",k.style.top=a.t+"px"}function M(){a.ww=innerWidth,a.wh=innerHeight,a.wr=a.ww/a.wh,a.ow=k.naturalWidth,a.oh=k.naturalHeight,a.r=a.ow/a.oh,a.ow>a.ww||a.oh>a.wh?a.r>a.wr?(a.z=a.mz=a.ww/a.ow,a.l=0,a.w=a.ww,a.h=a.w/a.r,a.t=(a.wh-a.h)/2):(a.z=a.mz=a.wh/a.oh,a.t=0,a.h=a.wh,a.w=a.h*a.r,a.l=(a.ww-a.w)/2):(a.z=a.mz=1,a.w=a.ow,a.h=a.oh,a.l=(a.ww-a.w)/2,a.t=(a.wh-a.h)/2),O()}C.onzoomstart=function e(t){var n=t.x,o=t.y,i=a.z;this.onzoomstart=null;this.onzoomchange=s;this.onzoomend=function(t){s.call(this,t),this.onzoomchange=this.zoomend=null,this.onzoomstart=e};function s(e){var t=Math.max(Math.min(e.zoom*i,1),a.mz);t!==a.z&&(a.w=a.ow*t,a.h=a.oh*t,a.l=a.w>a.ww?Math.min(Math.max(n+(a.l-n)*t/a.z,a.ww-a.w),0):(a.ww-a.w)/2,a.t=a.h>a.wh?Math.min(Math.max(o+(a.t-o)*t/a.z,a.wh-a.h),0):(a.wh-a.h)/2,a.z=t,O())}},C.ondragstart=function e(t){var n=t.x,o=t.y,i=a.l,s=a.t;C.ondragmove=l;C.ondragend=function(t){l.call(this,t),this.ondragmove=this.ondragend=null,this.ondragstart=e};function l(e){a.w>a.ww&&(a.l=Math.min(Math.max(i+e.x-n,a.ww-a.w),0)),a.h>a.wh&&(a.t=Math.min(Math.max(s+e.y-o,a.wh-a.h),0)),O()}},g.showPhotoView=function(e,t,n){for(k.src=e;S.childNodes.length;)S.firstChild.remove();if("function"==typeof n&&t&&t.length){for(var o=0;o<t.length;o++){var i=document.createElement("a");i.href="javascript:;",i.appendChild(document.createTextNode(t[o])),i.addEventListener("click",n.bind(g,o)),S.appendChild(i)}S.style.display=""}else S.style.display="none"},g.hidePhotoView=function(){k.src="about:blank"},k.addEventListener("load",function(){L.style.visibility="inherit",self.addEventListener("resize",M),M()}),k.addEventListener("error",function(){L.style.visibility="",self.removeEventListener("resize",M)}),g.showSliderView=function(e,t,n){v.className=n||"";for(var o=0;o<e.length;o++)b.add(e[o]);t&&b.slideTo(t,!0)},g.hideSliderView=function(){b.clear()},g.alert=function(e,t){x("alert",e,t)},g.confirm=function(e,t){x("confirm",e,t)},g.htmlDialog=function(e,t,n){x(t||"",e,n)},g.closeDialog=function(e){if("function"==typeof o){var t=o;o=void 0,t(e)}for(self.removeEventListener("resize",q),d.style.visibility="";h.childNodes.length;)h.lastChild.remove();s.length&&x.apply(void 0,s.shift())},g.showLoading=function(e){r.querySelector(":scope>div").lastChild.data=e||l.loading,0===i&&(r.style.visibility="inherit",m.classList.add("mask")),i++},g.hideLoading=function(){i>0&&0===--i&&(r.style.visibility="",m.classList.remove("mask"),"function"==typeof g.dialogEvents.onloaded&&g.dialogEvents.onloaded({type:"loaded"}))},g.isLoading=function(){return i>0},g.hint=function(e,t){c.querySelector(":scope>.text").firstChild.data=e,n?clearTimeout(n):c.style.opacity=1,n=setTimeout(function(){c.style.opacity="",n=void 0},t||5e3)},g.dialogEvents={},b.onchange=function(){var e="";if(this.children.length){if(this.children.length>1)for(var t=0;t<this.children.length;t++)e+=t===this.current?"●":"○";v.style.visibility="inherit"}else v.style.visibility="";v.querySelector(":scope>.nav").firstChild.data=e},p.appendChild(g.makeSvg("times-light",1)),p.addEventListener("click",P),y.addEventListener("click",P),f.addEventListener("click",g.closeDialog),w.appendChild(g.makeSvg("times-solid",1)),E.appendChild(w.firstChild.cloneNode(!0)),w.addEventListener("click",g.hideSliderView),E.addEventListener("click",g.hidePhotoView)}()),function(){var e,t,n,o,s,a,c=location.pathname,d=document.body.querySelector("#page"),h=d.querySelector(":scope>.navMenu"),p=d.querySelector(":scope>.header>.title").firstChild,f=d.querySelector(":scope>.header>.back"),y=d.querySelector(":scope>.header>.leftMenuBtn"),v=d.querySelector(":scope>.header>.rightMenuBtn");try{sessionStorage.setItem(0,0),sessionStorage.removeItem(0)}catch(e){Storage.prototype.setItem=function(){}}function E(e){e&&(g.listeners.remove(this,e.type,E),setTimeout(function(){document.body.querySelector("#popup").style[u]=""},400)),document.body.addEventListener("transitionend",k),document.documentElement.classList.remove("loading")}function k(e){e.target===this&&(this.removeEventListener(e.type,k),this.style.transition="")}function S(e){for(;h.childNodes.length;)h.firstChild.remove();for(var t in a={},s=e)i.hasOwnProperty(t)&&(a[t]=h.appendChild(document.createElement("a")),a[t].href="#!"+t,RegExp("^"+t+"(?:-|$)").test(g.location.id)?(a[t].className="selected",a[t].appendChild(g.makeSvg("string"==typeof s[t]?s[t]:s[t].selected,1))):a[t].appendChild(g.makeSvg("string"==typeof s[t]?s[t]:s[t].normal,1)),a[t].appendChild(document.createTextNode(i[t].alias?i[t].title||i[i[t].alias].title:i[t].title)))}function C(){var t=g.parseHash(location.hash);g.isSameLocation(t,g.location)||(g.lastLocation=g.location,g.location=t,!i[g.location.id].back||g.lastLocation.id!==i[g.location.id].back&&i[g.lastLocation.id].alias!==i[g.location.id].back?i[g.lastLocation.id].backLoc&&(g.location.id===i[g.lastLocation.id].back||i[g.location.id].alias&&i[g.location.id].alias===i[g.lastLocation.id].back)&&(delete i[g.lastLocation.id].backLoc,delete e[g.lastLocation.id],sessionStorage.setItem(c,toJsex(e))):(e[g.location.id]=i[g.location.id].backLoc=g.lastLocation,sessionStorage.setItem(c,toJsex(e))),P())}function P(){var e=g.location.id;if(g.hasOwnProperty("lastLocation")){var r=e.replace(/-.*$/,""),c=g.lastLocation.id.replace(/-.*$/,"");r!==c&&(a.hasOwnProperty(r)&&(a[r].className="selected","string"!=typeof s[r]&&g.setSvgPath(a[r].firstChild,s[r].selected,1)),a.hasOwnProperty(c)&&(a[c].className="","string"!=typeof s[c]&&g.setSvgPath(a[c].firstChild,s[c].normal,1))),q()}"function"==typeof g.pageEvents.onroute&&g.pageEvents.onroute({type:"route"}),b("page",e,function(s){if(n)o=!0;else{var a;if(e===t)O();else{var r=i[e].alias?i[e].alias:e,c=i[e].title||i[r].title;for(d.classList.add(e),p.data=c,(m.classList.contains("clean")||m.classList.contains("hidePageHeader"))&&(document.title=c),self.frameElement&&frameElement.kernel&&"page"===g.getCurrentPopup()&&g.setPopupTitle(c);v.childNodes.length;)v.firstChild.remove();for(v.removeAttribute("href");y.childNodes.length;)y.firstChild.remove();y.removeAttribute("href"),i[r].rightMenuContent||i[r].onrightmenuclick?("string"==typeof i[r].rightMenuContent?v.innerHTML=i[r].rightMenuContent:i[r].rightMenuContent&&v.appendChild(i[r].rightMenuContent),"function"==typeof i[r].onrightmenuclick?v.href="javascript:;":i[r].onrightmenuclick&&(v.href=i[r].onrightmenuclick),v.style.display=""):v.style.display="none",i[r].leftMenuContent||i[r].onleftmenuclick?("string"==typeof i[r].leftMenuContent?y.innerHTML=i[r].leftMenuContent:i[r].leftMenuContent&&y.appendChild(i[r].leftMenuContent),"function"==typeof i[r].onleftmenuclick?y.href="javascript:;":i[r].onleftmenuclick&&(y.href=i[r].onleftmenuclick),y.style.display=""):y.style.display="none";var u=g.getDefaultBack();if(u){var h=i[u.id].title;!h&&i[u.id].alias&&(h=i[i[u.id].alias].title),f.lastChild.data=h||l.back,f.href=g.buildHash(u),f.style.display=""}else f.style.display="none";var b=d.querySelector(":scope>.content>."+r);if(t){d.classList.remove(t);var E=i[t].alias?i[t].alias:t,k=t;if(t=e,r===E)O(a=!0);else{n=!0;var S=d.querySelector(":scope>.content>."+E),C=g.lastLocation&&g.lastLocation.args.backHash===location.hash||g.isGoingback(k,e);a=!C||s,L(b,S,C,function(){n=!1,"function"==typeof i[E].onunloadend&&i[E].onunloadend(),i[E].status--,i[E].autoDestroy?w(i[E],"page",E):document.activeElement&&S.contains(document.activeElement)&&document.activeElement.blur(),"function"==typeof i[r].onloadend&&i[r].onloadend(a),i[r].status++,o&&(o=!1,b.style.visibility="inherit",P())}),"function"==typeof i[E].onunload&&i[E].onunload(),i[E].status--,i[r].status++,"function"==typeof i[r].onload&&i[r].onload(a)}}else a=!0,t=e,b.style.left=0,b.style.visibility="inherit",O(a)}"function"==typeof g.pageEvents.onrouteend&&g.pageEvents.onrouteend({type:"routeend",force:a})}})}function x(e,n){var o=i[t].alias?i[i[t].alias]:i[t];(!e||e===t||"Array"===dataType(e)&&e.indexOf(t)>=0)&&(n||q(),"function"==typeof o.onload&&o.onload(!0),"function"==typeof o.onloadend&&o.onloadend(!0))}function q(){self.frameElement&&frameElement.kernel||(g.hideReadable(),g.closePopup())}function O(e){var n=i[t].alias?i[i[t].alias]:i[t];n.status<3&&n.status++,"function"==typeof n.onload&&n.onload(e),"function"==typeof n.onloadend&&n.onloadend(e),n.status<4&&n.status++}g.init=function(t,n){if(i.hasOwnProperty(t))if(r){if(n&&S(n),r!==t){var o=r;if(r=t,g.location.id===o)return C(),!0}}else{for(var s in r=t,g.location=g.parseHash(location.hash),g.location.args.ui&&g.location.args.ui.split(",").forEach(function(e){m.classList.add(e)}),(e=sessionStorage.getItem(c))&&(e=e.parseJsex())&&(e=e.value),e||(e={}),e)i.hasOwnProperty(s)&&(i[s].backLoc=e[s]);var a;if(self.addEventListener("hashchange",C),S(n),P(),g.location.args.hasOwnProperty("autoPopup"))g.location.args.hasOwnProperty("autoPopupArg")&&(a=g.location.args.autoPopupArg.parseJsex())&&(a=a.value),g.openPopup(g.location.args.autoPopup,a)?(document.body.querySelector("#popup").style[u]="1ms",g.listeners.add(g.popupEvents,"showend",E)):E();else E()}},g.reloadPage=function(e,t){var n;g.isLoading()?(n=g.location,g.listeners.add(g.dialogEvents,"loaded",function o(i){g.listeners.remove(this,i.type,o);n===g.location&&x(e,t)})):x(e,t)},g.destroyPage=function(e){if(2===i[e].status)return w(i[e],"page",e),!0},g.pageEvents={},f.insertBefore(g.makeSvg("angle-left-light",1),f.firstChild),v.addEventListener("click",function(e){var n=i[i[t].alias?i[t].alias:t];"function"==typeof n.onrightmenuclick&&n.onrightmenuclick()}),y.addEventListener("click",function(e){var n=i[i[t].alias?i[t].alias:t];"function"==typeof n.onleftmenuclick&&n.onleftmenuclick()})}(),l=g.getLang(l),self.addEventListener("contextmenu","Firefox"===browser.name?C:S),self.addEventListener("dragstart",S),"IOS"===browser.name&&(self.addEventListener("gesturestart",S,{passive:!1}),self.addEventListener("touchmove",S,{passive:!1})),g;function w(e,t,n){var o=document.body.querySelector("#"+t+">.content>."+n);if(o&&("function"==typeof e.ondestroy&&e.ondestroy(),o.remove(),e.js)){var i=t+"/"+n+"/"+n;require.defined(i)&&(o=require(i),require.undef(i),o&&(self.Reflect?Reflect.setPrototypeOf(e,Object.prototype):e.__proto__=Object.prototype))}e.css&&e.css.href&&(g.removeCss(e.css),e.css=!0),delete e.status}function b(e,t,n){var o,r;if("panel"===e?o=s[t]:"popup"===e?o=a[t]:(o=i[t]).alias&&(t=o.alias,o=i[o.alias]),o.status>1)n();else if(!o.status){var c=function(i){var s=document.body.querySelector("#"+e+">.content");s.insertAdjacentHTML("beforeEnd",'<div class="'+t+'">'+i+"</div>");var a=s.lastChild;if("panel"!==e&&E(a),o.js){g.showLoading(),a.style.opacity=0,a.style.transition="opacity 400ms ease-in-out",a.addEventListener("transitionend",function e(t){t.target===this&&(this.removeEventListener(t.type,e),this.style.transition="")}),g.listeners.add(g.dialogEvents,"loaded",function e(t){g.listeners.remove(this,t.type,e);a.style.opacity=""});var l=r+t;require([l],function(e){e&&(self.Reflect?Reflect.setPrototypeOf(o,e):o.__proto__=e),o.status++,n(!0),g.hideLoading()},"dev"===VERSION?void 0:function(n){w(o,e,t),n.requireType&&"scripterror"!==n.requireType&&"nodefine"!==n.requireType||n.xhr&&404!==n.xhr.status?d(l,n.message):u(),g.hideLoading()})}else o.status++,n(!0)},d=function(t,n){g.alert(l.error.replace("${res}",t)+n,"page"===e?function(){history.back()}:void 0)},u=function(){"page"===e?location.reload():g.confirm(l.update,function(e){e&&location.reload()})};o.status=1,r=e+"/"+t+"/";var h=require.toUrl(r);if(o.css&&(o.css=g.appendCss(h+t)),o.html){g.showLoading();var p=h+t+".html",f=new XMLHttpRequest;f.open("get",p,!0),f.onreadystatechange=function(){4===this.readyState&&(200===this.status?c(this.responseText):(w(o,e,t),"dev"===VERSION||404!==this.status?d(p,this.status):u()),g.hideLoading())},f.send("")}else c("")}}function L(e,t,n,o){e.style.visibility="inherit",n?(t.style[d]="viewTransR1",e.style[d]="viewTransR2"):(t.style[d]="viewTransL1",e.style[d]="viewTransL2"),"function"==typeof o&&E(e,function e(t){this.removeEventListener(t.type,e,!1);o()})}function E(e,t){"function"!=typeof t&&(t=k),e.addEventListener(c,t)}function k(e){e.target===this&&("1"===this.style[d].substr(this.style[d].length-1)?this.style.left=this.style.visibility="":this.style.left=0,this.style[d]="")}function S(e){e.preventDefault()}function C(e){e.stopPropagation()}});