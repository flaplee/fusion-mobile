'use strict';define(['common/touchslider/touchslider','common/touchguesture/touchguesture','common/pointerevents/pointerevents','common/svgicos/svgicos','site/pages/pages','site/popups/popups'],function(a,b,c,d,e,f){function g(a,b,c){var d=b+'/'+c+'/',e=document.body.querySelector('#'+b+'>.content>.'+c);2===a.loaded&&'function'==typeof a.ondestory&&a.ondestory(),e.remove(),a.css&&'string'!=typeof a.css&&(a.css=u.removeCss(a.css).substr(require.toUrl(d).length)),a.js&&(d+=a.js,require.defined(d)&&(e=require(d),require.undef(d),e&&(self.Reflect?Reflect.setPrototypeOf(a,Object.prototype):a.__proto__=Object.prototype))),a.loaded=0}function h(a,b,c,d){function f(e){var f;h.querySelector(':scope>.content').insertAdjacentHTML('beforeEnd','<div class="'+b+'">'+e+'</div>'),l(h.querySelector(':scope>.content>.'+b)),'js'in a?(u.showLoading(),f=o+a.js,require([f],function(b){b&&(self.Reflect?Reflect.setPrototypeOf(a,b):a.__proto__=b),a.loaded=2,d(!0),u.hideLoading()},'dev'===VERSION?void 0:function(d){g(a,k,b),d.requireType&&'scripterror'!==d.requireType&&'nodefine'!==d.requireType||d.xhr&&404!==d.xhr.status?i(f,d.message,c):j(c),u.hideLoading()})):(a.loaded=2,d(!0))}var h,k,o,p,q,r;c&&a.alias&&(b=a.alias,a=e[a.alias]),2===a.loaded?d():1!==a.loaded&&(a.loaded=1,c?(h=document.body.querySelector('#page'),k='page'):(h=document.body.querySelector('#popup'),k='popup'),o=k+'/'+b+'/',p=require.toUrl(o),'string'==typeof a.css&&(a.css=u.appendCss(p+a.css)),'html'in a?(u.showLoading(),q=p+a.html,r=new XMLHttpRequest,r.open('get',q,!0),r.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):(g(a,k,b),'dev'===VERSION||404!==this.status?i(q,this.status,c):j(c)),u.hideLoading())},r.send('')):f(''))}function i(a,b,c){u.alert('加载'+a+'时发生了一个错误: '+b,c?function(){history.back()}:void 0)}function j(a){a?location.reload():u.confirm('网站已经更新, 使用该功能需要先重新加载. 是否立即刷新本页?',function(a){a&&location.reload()})}function k(a,b,c,d){function e(a){this.removeEventListener(a.type,e,!1),d()}a.style.visibility='inherit',c?(b.style.animationName='panelTransR1',a.style.animationName='panelTransR2'):(b.style.animationName='panelTransL1',a.style.animationName='panelTransL2'),'function'==typeof d&&l(a,e)}function l(a,b){'function'!=typeof b&&(b=m),a.addEventListener('animationend',b)}function m(a){a.target===this&&(this.style.left='1'===this.style.animationName.substr(this.style.animationName.length-1)?this.style.visibility='':0,this.style.animationName='')}function n(a){a.preventDefault()}function p(a){a.stopPropagation()}function o(a){a&&(u.listeners.remove(this,a.type,o),setTimeout(function(){document.body.querySelector('#popup').style.animationDuration=''},400)),document.body.addEventListener('transitionend',function(a){a.target===this&&(document.body.style.transition='')}),document.documentElement.classList.remove('loading')}var q,r=Math.max,s=Math.min,t=document.body.querySelector('#activities'),u={appendCss:function c(a){var b=document.createElement('link');return /\.less$/.test(a)?self.less?(b.rel='stylesheet/less',b.href=a,less.sheets.push(b),less.refresh()):(b.rel='stylesheet',b.href=a.replace(/less$/,'css')):(b.rel='stylesheet',b.href=a),document.head.appendChild(b)},removeCss:function b(a){return a.remove(),'stylesheet/less'===a.rel&&(less.sheets.splice(less.sheets.indexOf(a),1),less.refresh()),a.getAttribute('href')},makeSvg:function d(a,b){var c=document.createElementNS('http://www.w3.org/2000/svg','svg');return c.appendChild(document.createElementNS('http://www.w3.org/2000/svg','path')),a&&u.setSvgPath(c,a,b),c},setSvgPath:function g(a,b,c){var e,f=u.makeSvg();d.hasOwnProperty(b)&&(b=d[b]),a.firstChild.setAttribute('d',b),f.style.position='absolute',f.style.bottom=f.style.right='100%',f.firstChild.setAttribute('d',b),document.body.appendChild(f),e=f.firstChild.getBBox(),f.remove(),2==c?(e.width+=2*e.x,e.x=0,e.height+=2*e.y,e.y=0):c&&(e.width>e.height?(e.y-=(e.width-e.height)/2,e.height=e.width):(e.x-=(e.height-e.width)/2,e.width=e.height)),a.setAttribute('viewBox',e.x+' '+e.y+' '+e.width+' '+e.height)},parseHash:function g(b){var c,d,f={id:q,args:{}};if(b=b.substr(1).replace(/[#?].*$/,''),d=b.match(/[^=&]+(=[^&]*)?/g),d&&'!'===d[0].charAt(0)){c=decodeURIComponent(d[0].substr(1)),e.hasOwnProperty(c)&&(f.id=c);for(var h=1;h<d.length;h++)c=d[h].match(/^([^=]+)(=)?(.+)?$/),c&&(f.args[decodeURIComponent(c[1])]=c[2]?decodeURIComponent(c[3]||''):void 0)}return f},getDefaultBack:function f(a){var b,c,d;if(a||(a=u.location),c=e[a.id].backLoc,e[a.id].back&&e[e[a.id].back]&&(d={id:e[a.id].back,args:{}},b=e[e[a.id].back].alias?e[e[e[a.id].back].alias]:e[e[a.id].back],b.args))for(var g=0;g<b.args.length;g++)a.args.hasOwnProperty(b.args[g])&&(d.args[b.args[g]]=a.args[b.args[g]]);if(c&&d){for(var h in d.args)if(d.args[h]!==c.args[h])return d;return c}return c||d},isGoingback:function k(a,b){var c,d,g,h=a;if(h!==b){if(b===q||h.length>b.length+1&&h.substr(0,b.length+1)===b+'-')return!0;for(;e[h].back;)if(h=e[h].back,h===b)return!0;for(h=a.split('-'),g=b.split('-'),d=s(h.length,g.length);c<d&&h[c]===g[c];)c++;if(c<r(h.length,g.length)-1)return c<h.length-1&&h.splice(c+1),c<g.length-1&&g.splice(c+1),u.isGoingback(h.join('-'),g.join('-'))}},replaceLocation:function b(a){u.location&&u.isSameLocation(a,u.location)?u.reloadPage():location.replace(u.buildHash(a))}};return!function(){function a(a){for(;z.childNodes.length;)z.firstChild.remove();for(var b in v=a,w={},v)e.hasOwnProperty(b)&&(w[b]=z.appendChild(document.createElement('a')),w[b].href='#!'+b,RegExp('^'+b+'(?:-|$)').test(u.location.id)?(w[b].className='selected',w[b].appendChild(u.makeSvg('string'==typeof v[b]?v[b]:v[b].selected,1))):w[b].appendChild(u.makeSvg('string'==typeof v[b]?v[b]:v[b].normal,1)),w[b].appendChild(document.createTextNode(e[b].alias?e[b].title||e[e[b].alias].title:e[b].title)))}function b(){var a=u.parseHash(location.hash);u.isSameLocation(a,u.location)||(u.lastLocation=u.location,u.location=a,e[u.location.id].back&&(u.lastLocation.id===e[u.location.id].back||e[u.lastLocation.id].alias===e[u.location.id].back)?(l[u.location.id]=e[u.location.id].backLoc=u.lastLocation,sessionStorage.setItem(x,JSON.stringify(l))):e[u.lastLocation.id].backLoc&&(u.location.id===e[u.lastLocation.id].back||e[u.location.id].alias&&e[u.location.id].alias===e[u.lastLocation.id].back)&&(delete e[u.lastLocation.id].backLoc,delete l[u.lastLocation.id],sessionStorage.setItem(x,JSON.stringify(l))),c())}function c(){var a,b,d=u.location.id,g=e[d];u.hasOwnProperty('lastLocation')&&(a=d.replace(/-.*$/,''),b=u.lastLocation.id.replace(/-.*$/,''),a!==b&&(w.hasOwnProperty(a)&&(w[a].className='selected','string'!=typeof v[a]&&u.setSvgPath(w[a].firstChild,v[a].selected,1)),w.hasOwnProperty(b)&&(w[b].className='','string'!=typeof v[b]&&u.setSvgPath(w[b].firstChild,v[b].normal,1))),f()),'function'==typeof u.pageEvents.onroute&&u.pageEvents.onroute({type:'route'}),h(g,d,!0,function(a){var b,f,g,h,l,n,o,p;if(r)s=!0;else{if(d===m)i();else{for(o=e[d].alias?e[d].alias:d,y.classList.add(d),n=e[d].title||e[o].title,A.data=n,(t.classList.contains('clean')||t.classList.contains('hidePageHeader'))&&(document.title=n),self.frameElement&&frameElement.kernel&&'page'===u.getCurrentPopup()&&u.setPopupTitle(n);D.childNodes.length;)D.firstChild.remove();for(D.removeAttribute('href');C.childNodes.length;)C.firstChild.remove();C.removeAttribute('href'),e[o].rightMenuContent||e[o].onrightmenuclick?('string'==typeof e[o].rightMenuContent?D.innerHTML=e[o].rightMenuContent:e[o].rightMenuContent&&D.appendChild(e[o].rightMenuContent),'function'==typeof e[o].onrightmenuclick?D.href='javascript:;':e[o].onrightmenuclick&&(D.href=e[o].onrightmenuclick),D.style.display=''):D.style.display='none',e[o].leftMenuContent||e[o].onleftmenuclick?('string'==typeof e[o].leftMenuContent?C.innerHTML=e[o].leftMenuContent:e[o].leftMenuContent&&C.appendChild(e[o].leftMenuContent),'function'==typeof e[o].onleftmenuclick?C.href='javascript:;':e[o].onleftmenuclick&&(C.href=e[o].onleftmenuclick),C.style.display=''):C.style.display='none',j(u.getDefaultBack()),b=y.querySelector(':scope>.content>.'+o),m?(y.classList.remove(m),g=m,h=e[g].alias?e[g].alias:g,m=d,o===h?(p=!0,i(p)):(r=!0,f=y.querySelector(':scope>.content>.'+h),l=u.isGoingback(g,d),p=!l||a,k(b,f,l,function(){r=!1,'function'==typeof e[h].onunloadend&&e[h].onunloadend(),document.activeElement&&f.contains(document.activeElement)&&document.activeElement.blur(),'function'==typeof e[o].onloadend&&e[o].onloadend(p),s&&(s=!1,b.style.visibility='inherit',c())}),'function'==typeof e[h].onunload&&e[h].onunload(),'function'==typeof e[o].onload&&e[o].onload(p))):(p=!0,m=d,b.style.left=0,b.style.visibility='inherit',i(p))}'function'==typeof u.pageEvents.onroutend&&u.pageEvents.onroutend({type:'routend',force:p})}})}function d(a,b){var c=e[m].alias?e[e[m].alias]:e[m];(!a||a===m||'array'===u.dataType(a)&&0<=a.indexOf(m))&&(!b&&f(),'function'==typeof c.onload&&c.onload(!0),'function'==typeof c.onloadend&&c.onloadend(!0))}function f(){self.frameElement&&frameElement.kernel||(u.hideReadable(),u.closePopup())}function i(a){var b=e[m].alias?e[e[m].alias]:e[m];'function'==typeof b.onload&&b.onload(a),'function'==typeof b.onloadend&&b.onloadend(a)}function j(a){var b;a&&a.id?(b=e[a.id].title,!b&&e[a.id].alias&&(b=e[e[a.id].alias].title),B.lastChild.data=b||'返回',B.href=u.buildHash(a),B.style.display=''):B.style.display='none'}var l,m,r,s,v,w,x=location.pathname,y=document.body.querySelector('#page'),z=y.querySelector(':scope>.navMenu'),A=y.querySelector(':scope>.header>.title').firstChild,B=y.querySelector(':scope>.header>.back'),C=y.querySelector(':scope>.header>.leftMenuBtn'),D=y.querySelector(':scope>.header>.rightMenuBtn');try{sessionStorage.setItem(0,0),sessionStorage.removeItem(0)}catch(a){Storage.prototype.setItem=function(){}}u.init=function(d,f){if(e.hasOwnProperty(d))if(q=d,u.hasOwnProperty('location'))f&&a(f),b();else{for(var g in u.location=u.parseHash(location.hash),u.location.args.ui&&u.location.args.ui.split(',').forEach(function(a){t.classList.add(a)}),l=sessionStorage.getItem(x),l=l?JSON.parse(l):{},l)e.hasOwnProperty(g)&&(e[g].backLoc=l[g]);self.addEventListener('hashchange',b),a(f),self.addEventListener('contextmenu','Firefox'===browser.name?p:n),self.addEventListener('dragstart',n),c(),u.location.args.hasOwnProperty('autopopup')&&u.openPopup(u.location.args.autopopup,u.location.args.autopopuparg?JSON.parse(u.location.args.autopopuparg):void 0)?(document.body.querySelector('#popup').style.animationDuration='1ms',u.listeners.add(u.popupEvents,'showend',o)):o()}},u.reloadPage=function(a,b){function c(f){u.listeners.remove(this,f.type,c),e===u.location&&d(a,b)}var e;u.isLoading()?(e=u.location,u.listeners.add(u.dialogEvents,'loaded',c)):d(a,b)},u.destoryPage=function(a){e.hasOwnProperty(a)&&g(e[a],'page',a)},u.pageEvents={},B.insertBefore(u.makeSvg('angle-left-light',1),B.firstChild),D.addEventListener('click',function(){var a=e[e[m].alias?e[m].alias:m];'function'==typeof a.onrightmenuclick&&a.onrightmenuclick()}),C.addEventListener('click',function(){var a=e[e[m].alias?e[m].alias:m];'function'==typeof a.onleftmenuclick&&a.onleftmenuclick()})}(),'IOS'===browser.name&&(self.addEventListener('gesturestart',n),self.addEventListener('touchmove',n,{passive:!1})),self.frameElement&&frameElement.kernel?self.Reflect?Reflect.setPrototypeOf(u,frameElement.kernel):u.__proto__=frameElement.kernel:(!function(){u.buildHash=function(a){var b='#!'+encodeURIComponent(a.id);for(var c in a.args)b+=void 0===a.args[c]?'&'+encodeURIComponent(c):'&'+encodeURIComponent(c)+'='+encodeURIComponent(a.args[c]);return b},u.isSameLocation=function(a,b){if(a.id===b.id&&Object.keys(a.args).length===Object.keys(b.args).length){for(var c in a.args){if(!b.args.hasOwnProperty(c))return!1;if(void 0===a.args[c]){if(a.args[c]!==b.args[c])return!1;}else if(''+a.args[c]!=''+b.args[c])return!1}return!0}return!1},u.dataType=function(b){var a=typeof b;return 0>['boolean','string','symbol','number','bigint','function','undefined'].indexOf(a)?(a=Object.prototype.toString.call(b).replace(/^\[object |\]$/g,'').toLowerCase(),0>['date','array','regexp','error','null'].indexOf(a)?'object':a):a}}(),!function(){function a(a,c){var e=s(a,c),f=e/b;return 1<f&&(f=Math.sqrt(f)),d(a/f)}var b,c,d=Math.round,e=document.head.querySelector('meta[name=viewport]'),f=e.content;u.setAutoScale=function(a){b=a,0<b?self.visualViewport?visualViewport.dispatchEvent(new Event('resize')):self.dispatchEvent(new Event('resize')):e.content=f},self.visualViewport?visualViewport.addEventListener('resize',function(){0<b&&(e.content='user-scalable=no, width='+a(d(visualViewport.width*visualViewport.scale),d(visualViewport.height*visualViewport.scale)))}):self.addEventListener('resize',function(){if(0<b)if('IOS'===browser.name){if(e.content===f)e.content='user-scalable=no, width='+a(innerWidth,innerHeight);else{var d=innerWidth,g=innerHeight,h=function(){innerWidth===d&&innerHeight===g?requestAnimationFrame(h):e.content='user-scalable=no, width='+a(innerWidth,innerHeight)};e.content=f,h()}}else if(c)c=!1;else{e.content!==f&&(c=!0,e.content=f);var i=a(innerWidth,innerHeight);i!==innerWidth&&(c=!0,e.content='user-scalable=no, width='+i)}})}(),!function(){function a(a,b){var c;a.xEvents[b.type].locked=!0;for(var d=0;d<a.xEvents[b.type].length;d++)a.xEvents[b.type][d].call(a,b);for(a.xEvents[b.type].locked=!1;a.xEvents[b.type].stack.length;)a.xEvents[b.type].stack[0]?(c=a.xEvents[b.type].indexOf(a.xEvents[b.type].stack[0][1]),a.xEvents[b.type].stack[0][0]?0<=c&&a.xEvents[b.type].splice(c,1):0>c&&a.xEvents[b.type].push(a.xEvents[b.type].stack[0][1])):a.xEvents[b.type].splice(0,a.xEvents[b.type].length),a.xEvents[b.type].stack.shift();if(a.xEvents[b.type].length||(delete a.xEvents[b.type],a['on'+b.type]=null),a.xEvents.removeMark){for(var e in delete a.xEvents.removeMark,a.xEvents)delete a.xEvents[e],a['on'+e]=null;delete a.xEvents}}u.listeners={add:function e(b,c,d){b.xEvents||(b.xEvents=function(c){a(b,c)}),b.xEvents[c]||(b.xEvents[c]=[],b.xEvents[c].stack=[],b.xEvents[c].locked=!1,b['on'+c]=b.xEvents),b.xEvents[c].locked?b.xEvents[c].stack.push([!1,d]):0>b.xEvents[c].indexOf(d)&&b.xEvents[c].push(d)},list:function d(a,b){var c;if(b)c=a.xEvents&&a.xEvents[b]?a.xEvents[b].slice(0):[];else if(c={},a.xEvents)for(var e in a.xEvents)'array'===u.dataType(a.xEvents[e])&&a.xEvents[e].length&&(c[e]=a.xEvents[e].slice(0));return c},remove:function f(a,b,c){var d,e;if(a.xEvents)if(b)a.xEvents[b]&&(a.xEvents[b].locked?c?a.xEvents[b].stack.push([!0,c]):a.xEvents[b].stack.push(null):c?(e=a.xEvents[b].indexOf(c),0<=e&&a.xEvents[b].splice(e,1)):a.xEvents[b].splice(0,a.xEvents[b].length),0===a.xEvents[b].length&&(delete a.xEvents[b],a['on'+b]=null));else if(!a.xEvents.removeMark){for(var g in a.xEvents)a.xEvents[g].locked?d=!0:(delete a.xEvents[g],a['on'+g]=null);d?a.xEvents.removeMark=!0:delete a.xEvents}}}}(),!function(){function a(){0===this.scrollTop?this.scrollTop=1:this.scrollTop+this.clientHeight===this.scrollHeight&&(this.scrollTop-=1)}u.scrollReload=function(a,b){function d(b){b.target!==a&&(i=!0,this.removeEventListener('scroll',d,!0))}var e,f,g,i,j=this,k=c(a,function(c){var l;if('start'!==c.type){if(i)return i=!1,!0;if(c.y>e+5)f||(f=!0,c.domEvent.view.removeEventListener('scroll',d,!0)),c.domEvent.preventDefault(),g||(g=c.domEvent.view.document.createElement('div'),g.className='reloadHint',g.appendChild(j.makeSvg('sync-alt-solid',1)),a.appendChild(g)),l=g.offsetHeight||g.clientHeight,c.y-e<2*l?(g.style.top=c.y-e-l+'px',g.classList.remove('pin'),g.style.opacity=(c.y-e)/l/2,g.style.transform='rotate('+360*g.style.opacity+'deg)'):(g.style.top=l+'px',g.style.opacity=1,g.classList.add('pin'),g.style.transform='');else{if(c.y<e&&!f)return!0;g&&(g.remove(),g=void 0)}('end'===c.type||'cancel'===c.type)&&(g&&(g.remove(),g.classList.contains('pin')&&('function'==typeof b?b():j.reloadPage()),g=void 0),f=!1)}else if(0===k.pointers.length&&0===j.getScrollTop(a))return e=c.y,c.domEvent.view.addEventListener('scroll',d,!0),!0});j.fixIosScrolling(a)},u.fixIosScrolling=function(b,c){'IOS'===browser.name&&(b.style.webkitOverflowScrolling='touch',b.addEventListener('touchmove',p,{passive:!1}),!c&&(b.classList.add('iosScrollFix'),b.scrollTop=1,b.addEventListener('scroll',a)))},u.getScrollTop=function(a){return a.classList.contains('iosScrollFix')?a.scrollTop-1:a.scrollTop},u.getScrollHeight=function(a){return a.classList.contains('iosScrollFix')?a.scrollHeight-2:a.scrollHeight},u.setScrollTop=function(a,b){a.scrollTop=a.classList.contains('iosScrollFix')?b+1:b}}(),!function(){function a(){1<c.length?(c.shift(),'function'==typeof c[0]?(c[0](),a()):b(c[0])):d.style.display=''}function b(a){var b,c;f.src=a.img,'right'in a&&(f.style.right=a.right),'left'in a&&(f.style.left=a.left),'top'in a&&(f.style.top=a.top),'bottom'in a&&(f.style.bottom=a.bottom),'width'in a&&(f.style.width=a.width),'height'in a&&(f.style.height=a.height);for(var d=0;d<e.childNodes.length;d++)b=e.childNodes[d],a.rows[d]?(b.style.height=a.rows[d],b.className='unflexable'):(b.style.height='auto',b.className='flexable');b=e.childNodes[1];for(var g=0;g<b.childNodes.length;g++)c=b.childNodes[g],a.cells[g]?(c.style.width=a.cells[g],c.className='unflexable'):(c.style.width='auto',c.className='flexable')}var c,d=document.body.querySelector('#helper'),e=d.firstChild,f=d.lastChild;d.addEventListener('click',a),u.showHelper=function(a){c='array'===u.dataType(a)?a:[a],b(c[0]),d.style.display='block'}}(),!function(){function a(a,b){return c&&'function'==typeof f[c].onunload&&f[c].onunload()||'function'==typeof f[a].onload&&f[a].onload(b)}function b(a){c&&l.classList.remove(c),d=e=void 0,c=a,l.classList.add(c),n.data=f[a].title,t.classList.contains('hidePopupHeader')&&(document.title=n.data),o.style.display='none'}var c,d,e,i,j,l=document.body.querySelector('#popup'),m=l.querySelector(':scope>.header>.close'),n=l.querySelector(':scope>.header>.title').firstChild,o=l.querySelector(':scope>.header>.back');u.openPopup=function(a,b,d){var e=f[a];return e?(h(e,a,!1,function(){'function'==typeof e.open?e.open(b,c&&d):u.showPopup(a,d)}),!0):void u.hint('popup config not found: '+a)},u.showPopup=function(d,e){var g,h,m;if(i)j=function(){u.showPopup(d,e)};else if(e=c&&e,g=l.querySelector(':scope>.content>.'+d),!l.classList.contains('in')){if(a(d,e))return!0;g.style.left=0,g.style.visibility='inherit',l.classList.add('in'),i=d,'function'==typeof u.popupEvents.onshow&&u.popupEvents.onshow({type:'show',id:d}),b(d),u.hideReadable()}else{if(c!==d)return!!a(d,e)||(m=c,h=l.querySelector(':scope>.content>.'+c),k(g,h,e,function(){var a;i=!1,b(d),'function'==typeof f[m].onunloadend&&f[m].onunloadend(),document.activeElement&&h.contains(document.activeElement)&&document.activeElement.blur(),'function'==typeof f[c].onloadend&&f[c].onloadend(e),'function'==typeof j&&(a=j,j=void 0,a())}),i=d,!1);'function'==typeof f[d].onload&&f[d].onload(e)||'function'!=typeof f[d].onloadend||f[d].onloadend(e)}},u.closePopup=function(a){var b;i?j=function(){u.closePopup(a)}:(b=u.getCurrentPopup(),b&&(!a||b===a||'array'===u.dataType(a)&&0<=a.indexOf(b))&&('function'!=typeof f[b].onunload||!f[b].onunload())&&(l.classList.remove('in'),l.classList.add('out'),i=!0,'function'==typeof u.popupEvents.onhide&&u.popupEvents.onhide({type:'hide',id:b})))},u.getCurrentPopup=function(){if(l.classList.contains('in'))return c},u.setPopupBack=function(a,b){l.classList.contains('in')&&(a?(o.lastChild.data='function'!=typeof a&&f[a].title?f[a].title:'返回',d=a,o.style.display='',e=b):o.style.display='none')},u.setPopupTitle=function(a,b){b?f.hasOwnProperty(b)&&(f[b].title=a,c===b&&(n.data=a,t.classList.contains('hidePopupHeader')&&(document.title=n.data))):l.classList.contains('in')&&(n.data=a,t.classList.contains('hidePopupHeader')&&(document.title=n.data))},u.destoryPopup=function(a){var b=f[a];b&&g(b,'popup',a)},u.popupEvents={},m.appendChild(u.makeSvg('times-light',1)),m.addEventListener('click',function(){u.closePopup()}),o.insertBefore(u.makeSvg('angle-left-light',1),o.firstChild),o.addEventListener('click',function(){'function'==typeof d?d(e):u.openPopup(d,e,!0)}),l.addEventListener('animationend',function(a){var b,d;a.target===this&&(i=!1,this.classList.contains('out')?(this.classList.remove('out'),'function'==typeof u.popupEvents.onhideend&&u.popupEvents.onhideend({type:'hideend',id:c}),b=l.querySelector(':scope>.content>.'+c),b.style.left=b.style.visibility='','function'==typeof f[c].onunloadend&&f[c].onunloadend(),document.activeElement&&b.contains(document.activeElement)&&document.activeElement.blur(),l.classList.remove(c),c=void 0):('function'==typeof f[c].onloadend&&f[c].onloadend(!0),'function'==typeof u.popupEvents.onshowend&&u.popupEvents.onshowend({type:'showend',id:c})),'function'==typeof j&&(d=j,j=void 0,d()))})}(),!function(){var a,b=document.body.querySelector('#readable'),c=b.querySelector(':scope>.close'),d=b.querySelector(':scope>.content');u.fixIosScrolling(d),u.showReadable=function(c,e,f){'string'==typeof c?d.innerHTML=c:d.appendChild(c),b.className=f?'in '+f:'in',a=e},u.hideReadable=function(){b.classList.contains('in')&&(b.classList.remove('in'),b.classList.add('out'),'function'==typeof a&&a())},u.showForeign=function(a,b){u.showReadable('<iframe frameborder="no" scrolling="auto" sandbox="allow-same-origin allow-forms allow-scripts" src="'+a+'"></iframe>',b,'foreign')},c.appendChild(u.makeSvg('times-solid',1)),c.addEventListener('click',u.hideReadable),b.addEventListener('animationend',function(a){if(a.target===this&&this.classList.contains('out')){for(;0<d.childNodes.length;)d.firstChild.remove();this.className=''}})}(),!function(){function c(){u.closeDialog()}function d(a,b,c){'inherit'===q.style.visibility?m.push([a,b,c]):(v.className=a,'alert'===a?w.textContent=b:'confirm'===a?'string'==typeof b?(w.textContent=b,y.textContent='是',z.textContent='否'):(w.textContent=b[0],y.textContent=b[1],z.textContent=b[2]):'string'==typeof b?w.innerHTML=b:w.appendChild(b),self.addEventListener('resize',e),e(),q.style.visibility='inherit',k=c)}function e(){v.style.width=v.style.height='',v.style.left=v.style.top='20px',v.style.bottom=v.style.right='auto',v.style.width=v.offsetWidth+'px',v.style.height=v.offsetHeight+'px',v.style.left=v.style.top=v.style.bottom=v.style.right=''}function f(){F.style.width=n.w+'px',F.style.height=n.h+'px',F.style.left=n.l+'px',F.style.top=n.t+'px'}function g(){n.ww=innerWidth,n.wh=innerHeight,n.wr=n.ww/n.wh,n.ow=F.naturalWidth,n.oh=F.naturalHeight,n.r=n.ow/n.oh,n.ow>n.ww||n.oh>n.wh?n.r>n.wr?(n.z=n.mz=n.ww/n.ow,n.l=0,n.w=n.ww,n.h=n.w/n.r,n.t=(n.wh-n.h)/2):(n.z=n.mz=n.wh/n.oh,n.t=0,n.h=n.wh,n.w=n.h*n.r,n.l=(n.ww-n.w)/2):(n.z=n.mz=1,n.w=n.ow,n.h=n.oh,n.l=(n.ww-n.w)/2,n.t=(n.wh-n.h)/2),f()}function h(a){function b(a){var b=r(s(a.zoom*e,1),n.mz);b!==n.z&&(n.w=n.ow*b,n.h=n.oh*b,n.l=n.w>n.ww?s(r(c+(n.l-c)*b/n.z,n.ww-n.w),0):(n.ww-n.w)/2,n.t=n.h>n.wh?s(r(d+(n.t-d)*b/n.z,n.wh-n.h),0):(n.wh-n.h)/2,n.z=b,f())}var c=a.x,d=a.y,e=n.z;this.onzoomstart=null,this.onzoomchange=b,this.onzoomend=function(a){b.call(this,a),this.onzoomchange=this.zoomend=null,this.onzoomstart=h}}function i(a){function b(a){n.w>n.ww&&(n.l=s(r(e+a.x-c,n.ww-n.w),0)),n.h>n.wh&&(n.t=s(r(g+a.y-d,n.wh-n.h),0)),f()}var c=a.x,d=a.y,e=n.l,g=n.t;H.ondragmove=b,H.ondragend=function(a){b.call(this,a),this.ondragmove=this.ondragend=null,this.ondragstart=i}}var j,k,l=0,m=[],n={},o=document.body.querySelector('#loading'),p=document.body.querySelector('#hint'),q=document.body.querySelector('#dialog'),v=q.querySelector(':scope>div'),w=v.querySelector(':scope>.content'),x=v.querySelector(':scope>.close'),y=v.querySelector(':scope>.btns>.yes'),z=v.querySelector(':scope>.btns>.no'),A=document.body.querySelector('#sliderView'),B=A.querySelector(':scope>.close'),C=a(A.querySelector(':scope>.content')),D=document.body.querySelector('#photoView'),E=D.querySelector(':scope>.close'),F=D.querySelector(':scope>img'),G=D.querySelector(':scope>.actions'),H=b(D);H.onzoomstart=h,H.ondragstart=i,u.showPhotoView=function(a,b,c){var d;for(F.src=a;G.childNodes.length;)G.firstChild.remove();if('function'==typeof c&&b&&b.length){for(var e=0;e<b.length;e++)d=document.createElement('a'),d.href='javascript:;',d.appendChild(document.createTextNode(b[e])),d.addEventListener('click',c.bind(u,e)),G.appendChild(d);G.style.display=''}else G.style.display='none'},u.hidePhotoView=function(){F.src='about:blank'},F.addEventListener('load',function(){D.style.visibility='inherit',self.addEventListener('resize',g),g()}),F.addEventListener('error',function(){D.style.visibility='',self.removeEventListener('resize',g)}),u.showSliderView=function(a,b,c){A.className=c||'';for(var d=0;d<a.length;d++)C.add(a[d]);b&&C.slideTo(b,!0)},u.hideSliderView=function(){C.clear()},u.alert=function(a,b){d('alert',a,b)},u.confirm=function(a,b){d('confirm',a,b)},u.htmlDialog=function(a,b,c){d(b||'',a,c)},u.closeDialog=function(b){var c;for(self.removeEventListener('resize',e,!1),q.style.visibility='','function'==typeof k&&k(b);w.childNodes.length;)w.lastChild.remove();k=void 0,m.length&&(c=m.shift(),u[c.shift()].apply(u,c))},u.showLoading=function(a){o.querySelector(':scope>div').lastChild.data=a?a:'加载中...',0==l&&(o.style.visibility='inherit',t.classList.add('mask')),l++},u.hideLoading=function(){0<l&&(l--,0==l&&(o.style.visibility='',t.classList.remove('mask'),'function'==typeof u.dialogEvents.onloaded&&u.dialogEvents.onloaded({type:'loaded'})))},u.isLoading=function(){return 0<l},u.hint=function(a,b){p.querySelector(':scope>.text').firstChild.data=a,j?clearTimeout(j):p.style.opacity=1,j=setTimeout(function(){p.style.opacity='',j=void 0},b?b:5e3)},u.dialogEvents={},C.onchange=function(){var a='';if(this.children.length){if(1<this.children.length)for(var b=0;b<this.children.length;b++)a+=b===this.current?'●':'○';A.style.visibility='inherit'}else A.style.visibility='';A.querySelector(':scope>.nav').firstChild.data=a},x.appendChild(u.makeSvg('times-circle-solid',1)),x.addEventListener('click',c),z.addEventListener('click',c),y.addEventListener('click',u.closeDialog),B.appendChild(u.makeSvg('times-solid',1)),E.appendChild(B.firstChild.cloneNode(!0)),B.addEventListener('click',u.hideSliderView),E.addEventListener('click',u.hidePhotoView)}()),u});