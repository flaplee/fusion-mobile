'use strict';define(['common/pointerevents/pointerevents'],function(a){function b(a,b,h){var i;if(!('start'===b.type))'move'===b.type?c(a,b,h):d(a,b,h);else if(2>h.length)return i={id:b.id,x:b.x,y:b.y},h.push(i),1===h.length?e(a,'dragstart',{x:h[0].x,y:h[0].y}):(i.l=f(g(b.x-h[0].x,2)+g(b.y-h[0].y,2)),e(a,'dragend',{x:h[0].x,y:h[0].y}),e(a,'zoomstart',{x:(h[0].x+h[1].x)/2,y:(h[0].y+h[1].y)/2})),!0}function c(a,b,c){var d=0;if(b.domEvent.preventDefault(),b.domEvent.stopPropagation(),1===c.length)b.id===c[0].id&&(c[0].x=b.x,c[0].y=b.y,e(a,'dragmove',{x:c[0].x,y:c[0].y}));else{var d=b.id===c[0].id?0:1;c[d].x=b.x,c[d].y=b.y,e(a,'zoomchange',{zoom:f(g(c[1].x-c[0].x,2)+g(c[1].y-c[0].y,2))/c[1].l})}}function d(a,b,c){var d;2===c.length?(d=b.id===c[0].id?0:1,c[d].x=b.x,c[d].y=b.y,e(a,'zoomend',{zoom:f(g(c[1].x-c[0].x,2)+g(c[1].y-c[0].y,2))/c[1].l}),c.splice(d,1),delete c[0].l,e(a,'dragstart',{x:c[0].x,y:c[0].y})):(c.pop(),e(a,'dragend',{x:b.x,y:b.y}))}function e(a,b,c){var d='on'+b;'function'==typeof a[d]&&(!c&&(c={}),c.type=b,a[d](c))}var f=Math.sqrt,g=Math.pow,h=function(c){var d,e;return this instanceof h?void(d=this,e=[],this.destory=a(c,function(a){return b(d,a,e)}).destory):new h(c)};return h});